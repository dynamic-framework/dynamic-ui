{"file":"m-input-currency-base.entry.js","mappings":";;;;MAea,kBAAkB;;;;;;;;;IAuKrB,kBAAa,GAAG,CAAC,KAAmC;MAC1D,KAAK,CAAC,eAAe,EAAE,CAAC;MACxB,IAAI,CAAC,qBAAqB,GAAG,CAAC,KAAK,CAAC,MAAM,KAAK,EAAE,IAAI,OAAO,KAAK,CAAC,MAAM,KAAK,QAAQ;UACjF,UAAU,CAAC,KAAK,CAAC,MAAM,CAAC;UACxB,SAAS,CAAC;MACd,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,KAAK,SAAS;UACjEA,YAAQ,CAAC,IAAI,CAAC,qBAAqB,kCAAO,IAAI,CAAC,eAAe,KAAE,MAAM,EAAE,EAAE,IAAG,CAAC,MAAM,EAAE;UACtF,EAAE,CAAC;MACP,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;KAC/C,CAAC;IAEM,gBAAW,GAAG,CAAC,KAAkB;MACvC,KAAK,CAAC,eAAe,EAAE,CAAC;MACxB,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;MAE3B,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,KAAK,SAAS;UACjEA,YAAQ,CAAC,IAAI,CAAC,qBAAqB,kCAAO,IAAI,CAAC,eAAe,KAAE,MAAM,EAAE,EAAE,IAAG,CAAC,MAAM,EAAE;UACtF,EAAE,CAAC;MACP,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;KAC7C,CAAC;IAEM,iBAAY,GAAG,CAAC,KAAkB;MACxC,KAAK,CAAC,eAAe,EAAE,CAAC;MACxB,IAAI,CAAC,YAAY,GAAG,QAAQ,CAAC;MAC7B,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,qBAAqB,KAAK,SAAS;UACjEA,YAAQ,CAAC,IAAI,CAAC,qBAAqB,kCAAO,IAAI,CAAC,eAAe,KAAE,MAAM,EAAE,EAAE,IAAG,CAAC,MAAM,EAAE;UACtF,EAAE,CAAC;MACP,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;KAC9C,CAAC;IAEM,iBAAY,GAAG,CAAC,KAAkB;;MACxC,KAAK,CAAC,eAAe,EAAE,CAAC;MACxB,MAAA,IAAI,CAAC,iBAAiB,0CAAE,SAAS,EAAE,CAAC;KACrC,CAAC;;;iBA1Lc,EAAE;;;;uBAoBa,EAAE;;sBAUZ,KAAK;sBAKL,KAAK;qBAKN,KAAK;;;;;;;;;;qBAkDL,KAAK;mBAKP,KAAK;;;;;;;wBAyCoB,MAAM;6BAEpB,KAAK;;EAGlC,iBAAiB,CAAC,QAAgB;IAChC,IAAI,CAAC,iBAAiB,GAAG,CAAC,IAAI,CAAC,YAAY,CAAC,QAAQ,CAAC,CAAC;GACvD;EA6CO,YAAY,CAAC,KAAc;IACjC,IAAI,KAAK,KAAK,SAAS,EAAE;MACvB,OAAO,IAAI,CAAC;KACb;IAED,IAAI,IAAI,CAAC,YAAY,KAAK,QAAQ,EAAE;MAClC,QACE,CAAC,IAAI,CAAC,QAAQ,KAAK,SAAS,GAAG,KAAK,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI;YACxD,IAAI,CAAC,QAAQ,KAAK,SAAS,GAAG,KAAK,IAAI,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,EAChE;KACH;IAED,OAAO,IAAI,CAAC;GACb;EAEO,WAAW;IACjB,IAAI,IAAI,CAAC,YAAY,KAAK,QAAQ,EAAE;MAClC,OAAO,IAAI,CAAC,qBAAqB,CAAC;KACnC;IAED,OAAO,IAAI,CAAC,qBAAqB,CAAC;GACnC;EAED,iBAAiB;IACf,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC,KAAK,CAAC;GACzC;EAED,gBAAgB;IACd,IAAI,CAAC,YAAY,GAAG,MAAM,CAAC;IAC3B,IAAI,CAAC,qBAAqB,GAAG,CAAC,IAAI,CAAC,qBAAqB,KAAK,SAAS;QAClEA,YAAQ,CAAC,IAAI,CAAC,qBAAqB,kCAAO,IAAI,CAAC,eAAe,KAAE,MAAM,EAAE,EAAE,IAAG,CAAC,MAAM,EAAE;QACtF,EAAE,CAAC;GACR;;EAGO,sBAAsB;IAC5B,OAAO;MACL,CAAC,KAAK,SAAS,yCAAyC,GAAG,SAAS,SAAS,YAAY;MACzF,CAAC,KAAK,SAAS,+BAA+B,GAAG,SAAS,SAAS,0CAA0C;KAC9G,CAAC;GACH;;EAGO,4BAA4B;IAClC,OAAO,EAAE,KAAK,EAAE,SAAS,SAAS,gCAAgC,EAAE,CAAC;GACtE;EAED,MAAM;IACJ,QACE,eACE,GAAG,EAAE,CAAC,EAAE,MAAM,IAAI,CAAC,iBAAiB,GAAG,EAAE,CAAC,EAC1C,KAAK,EAAE,IAAI,CAAC,sBAAsB,EAAE,EACpC,GAAG,EAAE,IAAI,CAAC,GAAG,EACb,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,KAAK,EAAE,IAAI,CAAC,KAAK,EACjB,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,oBAAoB,EAAE,IAAI,CAAC,oBAAoB,EAC/C,qBAAqB,EAAE,IAAI,CAAC,qBAAqB,EACjD,WAAW,EAAE,IAAI,CAAC,WAAW,EAC7B,KAAK,EAAE,IAAI,CAAC,WAAW,EAAE,EACzB,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,oBAAoB,EAAE,IAAI,CAAC,oBAAoB,EAC/C,qBAAqB,EAAE,IAAI,CAAC,qBAAqB,EACjD,OAAO,EAAE,IAAI,CAAC,OAAO,EACrB,kBAAkB,EAAE,IAAI,CAAC,kBAAkB,EAC3C,mBAAmB,EAAE,IAAI,CAAC,mBAAmB,EAC7C,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3B,UAAU,EAAE,IAAI,CAAC,UAAU,EAC3B,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,IAAI,EAAE,IAAI,CAAC,IAAI,EACf,SAAS,EAAE,IAAI,CAAC,SAAS,EACzB,OAAO,EAAE,IAAI,CAAC,OAAO,EACrB,IAAI,EAAE,IAAI,CAAC,YAAY,EACvB,UAAU,EAAC,SAAS,EACpB,OAAO,EAAC,QAAQ,EAChB,SAAS,EAAE,IAAI,CAAC,aAAa,EAC7B,OAAO,EAAE,IAAI,CAAC,WAAW,EACzB,QAAQ,EAAE,IAAI,CAAC,YAAY,EAC3B,QAAQ,EAAE,IAAI,CAAC,YAAY,IAE3B,YACE,IAAI,EAAC,aAAa,EAClB,KAAK,EAAE,IAAI,CAAC,4BAA4B,EAAE,IAEzC,IAAI,CAAC,YAAY,IAAI,IAAI,CAAC,eAAe,CAAC,MAAM,CAC5C,CACC,EACV;GACH;;;;;;;;","names":["currency"],"sources":["./src/components/m-input-currency-base/m-input-currency-base.tsx"],"sourcesContent":["import type { ComponentInterface, EventEmitter } from '@stencil/core';\nimport {\n  Component,\n  h,\n  Prop,\n  Event,\n  Watch,\n  State,\n} from '@stencil/core';\nimport currency from 'currency.js';\nimport type { Options } from 'currency.js';\n\nimport { PREFIX_BS } from '../../utils';\n\n@Component({ tag: 'm-input-currency-base' })\nexport class MInputCurrencyBase implements ComponentInterface {\n  /**\n   * The id of the input\n   */\n  @Prop() mId!: string;\n\n  /**\n   * The name of the input\n   */\n  @Prop() name?: string;\n\n  /**\n   * The label text\n   */\n  @Prop() label = '';\n\n  /**\n   * Icon for the label text\n   */\n  @Prop() labelIcon?: string;\n\n  /**\n   * Icon label family class\n   */\n  @Prop() labelIconFamilyClass?: string;\n\n  /**\n   * Icon label family class\n   */\n  @Prop() labelIconFamilyPrefix?: string;\n\n  /**\n   * Placeholder for the input\n   */\n  @Prop() placeholder?: string = '';\n\n  /**\n   * The value of the input\n   */\n  @Prop() value?: number;\n\n  /**\n   * The input is disabled\n   */\n  @Prop() isDisabled = false;\n\n  /**\n   * Flag to read only the input\n   */\n  @Prop() isReadOnly = false;\n\n  /**\n   * Flag for loading state.\n   */\n  @Prop() isLoading = false;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconFamilyClass?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconFamilyPrefix?: string;\n\n  /**\n   * Icon for the left\n   * */\n  @Prop() iconStart?: string;\n\n  /**\n   * Left icon family class\n   */\n  @Prop() iconStartFamilyClass?: string;\n\n  /**\n   * Left icon family class\n   */\n  @Prop() iconStartFamilyPrefix?: string;\n\n  /**\n   * Icon for the end\n   * */\n  @Prop() iconEnd?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconEndFamilyClass?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconEndFamilyPrefix?: string;\n\n  /**\n   * Hint to display\n   */\n  @Prop() hint?: string;\n\n  /**\n   * Add is-invalid class\n   */\n  @Prop() isInvalid = false;\n\n  /**\n   * Add is-valid class\n   */\n  @Prop() isValid = false;\n\n  /**\n   * * The min value of the input\n  */\n  @Prop() minValue?: number;\n\n  /**\n   * * The max value of the input\n  */\n  @Prop() maxValue?: number;\n\n  /**\n   * Options for the m-input-currency-base\n   */\n  @Prop() currencyOptions!: Options;\n\n  /**\n   * Currency code\n   */\n  @Prop() currencyCode?: string;\n\n  /**\n   * Emitted when the inputs change\n   */\n  @Event({ eventName: 'mChange' }) mChange!: EventEmitter<number>;\n\n  /**\n   * Emitted when the inputs bur\n   */\n  @Event({ eventName: 'mBlur' }) mBlur!: EventEmitter<number>;\n\n  /**\n   * Emitted when the inputs focus\n   */\n  @Event({ eventName: 'mFocus' }) mFocus!: EventEmitter<number>;\n\n  @State() internalValueAsNumber?: number;\n\n  @State() internalValueAsFormat?: string;\n\n  @State() internalType: 'text' | 'number' = 'text';\n\n  @State() internalIsInvalid = false;\n\n  @Watch('value')\n  watchValueHandler(newValue: number) {\n    this.internalIsInvalid = !this.isValidValue(newValue);\n  }\n\n  /**\n   * HTML m-input element\n   */\n  private htmlMInputElement?: HTMLMInputElement;\n\n  /**\n   * Emit input and select values when the values change\n   */\n  private changeHandler = (event: CustomEvent<string | number>) => {\n    event.stopPropagation();\n    this.internalValueAsNumber = (event.detail !== '' && typeof event.detail === 'string')\n      ? parseFloat(event.detail)\n      : undefined;\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.mChange.emit(this.internalValueAsNumber);\n  };\n\n  private blurHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.internalType = 'text';\n\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.mBlur.emit(this.internalValueAsNumber);\n  };\n\n  private focusHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.internalType = 'number';\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.mFocus.emit(this.internalValueAsNumber);\n  };\n\n  private wheelHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.htmlMInputElement?.blurInput();\n  };\n\n  private isValidValue(value?: number): boolean {\n    if (value === undefined) {\n      return true;\n    }\n\n    if (this.internalType === 'number') {\n      return (\n        (this.minValue !== undefined ? value >= this.minValue : true)\n        && (this.maxValue !== undefined ? value <= this.maxValue : true)\n      );\n    }\n\n    return true;\n  }\n\n  private valueAsType() {\n    if (this.internalType === 'number') {\n      return this.internalValueAsNumber;\n    }\n\n    return this.internalValueAsFormat;\n  }\n\n  connectedCallback() {\n    this.internalValueAsNumber = this.value;\n  }\n\n  componentDidLoad() {\n    this.internalType = 'text';\n    this.internalValueAsFormat = (this.internalValueAsNumber !== undefined)\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private generateStyleVariables() {\n    return {\n      [`--${PREFIX_BS}m-input-currency-component-symbol-color`]: `var(--${PREFIX_BS}secondary)`,\n      [`--${PREFIX_BS}m-input-currency-symbol-color`]: `var(--${PREFIX_BS}m-input-currency-component-symbol-color)`,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private generateSymbolStyleVariables() {\n    return { color: `var(--${PREFIX_BS}m-input-currency-symbol-color)` };\n  }\n\n  render() {\n    return (\n      <m-input// eslint-disable-next-line no-return-assign\n        ref={(el) => (this.htmlMInputElement = el)}\n        style={this.generateStyleVariables()}\n        mId={this.mId}\n        name={this.name}\n        label={this.label}\n        labelIcon={this.labelIcon}\n        labelIconFamilyClass={this.labelIconFamilyClass}\n        labelIconFamilyPrefix={this.labelIconFamilyPrefix}\n        placeholder={this.placeholder}\n        value={this.valueAsType()}\n        iconStart={this.iconStart}\n        iconStartFamilyClass={this.iconStartFamilyClass}\n        iconStartFamilyPrefix={this.iconStartFamilyPrefix}\n        iconEnd={this.iconEnd}\n        iconEndFamilyClass={this.iconEndFamilyClass}\n        iconEndFamilyPrefix={this.iconEndFamilyPrefix}\n        isDisabled={this.isDisabled}\n        isReadOnly={this.isReadOnly}\n        isLoading={this.isLoading}\n        hint={this.hint}\n        isInvalid={this.isInvalid}\n        isValid={this.isValid}\n        type={this.internalType}\n        mInputMode=\"decimal\"\n        pattern=\"^[0-9]\"\n        onMChange={this.changeHandler}\n        onMBlur={this.blurHandler}\n        onMFocus={this.focusHandler}\n        onMWheel={this.wheelHandler}\n      >\n        <span\n          slot=\"input-start\"\n          style={this.generateSymbolStyleVariables()}\n        >\n          {this.currencyCode || this.currencyOptions.symbol}\n        </span>\n      </m-input>\n    );\n  }\n}\n"],"version":3}