import{r as u,R as It}from"./iframe-DFXAi8lp.js";import{i as Xt,b as se,o as Zt,f as zt,s as Jt,c as Qt,d as st,e as J,g as en,h as We,j as Mt,k as tn,l as Ve,m as nn,n as rn,p as kt}from"./floating-ui.dom-4_SsKeQW.js";import{j as Z}from"./jsx-runtime-D_zvdyIk.js";import{r as Pt}from"./index-DEAdrYKr.js";/*!
* tabbable 6.3.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var on=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],Pe=on.join(","),At=typeof Element>"u",ye=At?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Ae=!At&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},xe=function(t,n){var r;n===void 0&&(n=!0);var o=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),s=o===""||o==="true",i=s||n&&t&&xe(t.parentNode);return i},sn=function(t){var n,r=t==null||(n=t.getAttribute)===null||n===void 0?void 0:n.call(t,"contenteditable");return r===""||r==="true"},Lt=function(t,n,r){if(xe(t))return[];var o=Array.prototype.slice.apply(t.querySelectorAll(Pe));return n&&ye.call(t,Pe)&&o.unshift(t),o=o.filter(r),o},Le=function(t,n,r){for(var o=[],s=Array.from(t);s.length;){var i=s.shift();if(!xe(i,!1))if(i.tagName==="SLOT"){var a=i.assignedElements(),v=a.length?a:i.children,c=Le(v,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else{var m=ye.call(i,Pe);m&&r.filter(i)&&(n||!t.includes(i))&&o.push(i);var R=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),E=!xe(R,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(R&&E){var d=Le(R===!0?i.children:R.children,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:i,candidates:d})}else s.unshift.apply(s,i.children)}}return o},Ft=function(t){return!isNaN(parseInt(t.getAttribute("tabindex"),10))},Ot=function(t){if(!t)throw new Error("No node provided");return t.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(t.tagName)||sn(t))&&!Ft(t)?0:t.tabIndex},un=function(t,n){var r=Ot(t);return r<0&&n&&!Ft(t)?0:r},an=function(t,n){return t.tabIndex===n.tabIndex?t.documentOrder-n.documentOrder:t.tabIndex-n.tabIndex},Dt=function(t){return t.tagName==="INPUT"},cn=function(t){return Dt(t)&&t.type==="hidden"},ln=function(t){var n=t.tagName==="DETAILS"&&Array.prototype.slice.apply(t.children).some(function(r){return r.tagName==="SUMMARY"});return n},fn=function(t,n){for(var r=0;r<t.length;r++)if(t[r].checked&&t[r].form===n)return t[r]},dn=function(t){if(!t.name)return!0;var n=t.form||Ae(t),r=function(a){return n.querySelectorAll('input[type="radio"][name="'+a+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(t.name));else try{o=r(t.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=fn(o,t.form);return!s||s===t},vn=function(t){return Dt(t)&&t.type==="radio"},mn=function(t){return vn(t)&&!dn(t)},pn=function(t){var n,r=t&&Ae(t),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==t){var i,a,v;for(s=!!((i=o)!==null&&i!==void 0&&(a=i.ownerDocument)!==null&&a!==void 0&&a.contains(o)||t!=null&&(v=t.ownerDocument)!==null&&v!==void 0&&v.contains(t));!s&&o;){var c,m,R;r=Ae(o),o=(c=r)===null||c===void 0?void 0:c.host,s=!!((m=o)!==null&&m!==void 0&&(R=m.ownerDocument)!==null&&R!==void 0&&R.contains(o))}}return s},it=function(t){var n=t.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},gn=function(t,n){var r=n.displayCheck,o=n.getShadowRoot;if(r==="full-native"&&"checkVisibility"in t){var s=t.checkVisibility({checkOpacity:!1,opacityProperty:!1,contentVisibilityAuto:!0,visibilityProperty:!0,checkVisibilityCSS:!0});return!s}if(getComputedStyle(t).visibility==="hidden")return!0;var i=ye.call(t,"details>summary:first-of-type"),a=i?t.parentElement:t;if(ye.call(a,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="full-native"||r==="legacy-full"){if(typeof o=="function"){for(var v=t;t;){var c=t.parentElement,m=Ae(t);if(c&&!c.shadowRoot&&o(c)===!0)return it(t);t.assignedSlot?t=t.assignedSlot:!c&&m!==t.ownerDocument?t=m.host:t=c}t=v}if(pn(t))return!t.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return it(t);return!1},bn=function(t){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(t.tagName))for(var n=t.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return ye.call(n,"fieldset[disabled] *")?!0:!o.contains(t)}return!0}n=n.parentElement}return!1},ze=function(t,n){return!(n.disabled||xe(n)||cn(n)||gn(n,t)||ln(n)||bn(n))},Je=function(t,n){return!(mn(n)||Ot(n)<0||!ze(t,n))},hn=function(t){var n=parseInt(t.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Nt=function(t){var n=[],r=[];return t.forEach(function(o,s){var i=!!o.scopeParent,a=i?o.scopeParent:o,v=un(a,i),c=i?Nt(o.candidates):a;v===0?i?n.push.apply(n,c):n.push(a):r.push({documentOrder:s,tabIndex:v,item:o,isScope:i,content:c})}),r.sort(an).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},De=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Le([t],n.includeContainer,{filter:Je.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:hn}):r=Lt(t,n.includeContainer,Je.bind(null,n)),Nt(r)},Rn=function(t,n){n=n||{};var r;return n.getShadowRoot?r=Le([t],n.includeContainer,{filter:ze.bind(null,n),flatten:!0,getShadowRoot:n.getShadowRoot}):r=Lt(t,n.includeContainer,ze.bind(null,n)),r},_t=function(t,n){if(n=n||{},!t)throw new Error("No node provided");return ye.call(t,Pe)===!1?!1:Je(n,t)};function $t(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function Bt(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function jt(){return/apple/i.test(navigator.vendor)}function Qe(){const e=/android/i;return e.test($t())||e.test(Bt())}function yn(){return $t().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Wt(){return Bt().includes("jsdom/")}const ut="data-floating-ui-focusable",En="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function de(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function G(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&Xt(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function ae(e){return"composedPath"in e?e.composedPath()[0]:e.target}function Ke(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function xn(e){return e.matches("html,body")}function X(e){return(e==null?void 0:e.ownerDocument)||document}function tt(e){return se(e)&&e.matches(En)}function at(e){return e?e.getAttribute("role")==="combobox"&&tt(e):!1}function wn(e){if(!e||Wt())return!0;try{return e.matches(":focus-visible")}catch{return!0}}function et(e){return e?e.hasAttribute(ut)?e:e.querySelector("["+ut+"]")||e:null}function he(e,t,n){return n===void 0&&(n=!0),e.filter(o=>{var s;return o.parentId===t&&(!n||((s=o.context)==null?void 0:s.open))}).flatMap(o=>[o,...he(e,o.id,n)])}function ct(e,t){var n;let r=[],o=(n=e.find(s=>s.id===t))==null?void 0:n.parentId;for(;o;){const s=e.find(i=>i.id===o);o=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function qe(e){e.preventDefault(),e.stopPropagation()}function Tn(e){return"nativeEvent"in e}function Cn(e){return e.mozInputSource===0&&e.isTrusted?!0:Qe()&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function Sn(e){return Wt()?!1:!Qe()&&e.width===0&&e.height===0||Qe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function we(e,t){const n=["mouse","pen"];return t||n.push("",void 0),n.includes(e)}var In=typeof document<"u",Mn=function(){},z=In?u.useLayoutEffect:Mn;const kn={...It};function pe(e){const t=u.useRef(e);return z(()=>{t.current=e}),t}const Pn=kn.useInsertionEffect,An=Pn||(e=>e());function Q(e){const t=u.useRef(()=>{});return An(()=>{t.current=e}),u.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t.current==null?void 0:t.current(...r)},[])}const Te=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Vt(e,t){const n=De(e,Te()),r=n.length;if(r===0)return;const o=de(X(e)),s=n.indexOf(o),i=s===-1?t===1?0:r-1:s+t;return n[i]}function Kt(e){return Vt(X(e).body,1)||e}function qt(e){return Vt(X(e).body,-1)||e}function Ee(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!G(n,r)}function Ln(e){De(e,Te()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function lt(e){e.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}var Fn=typeof document<"u",On=function(){},ke=Fn?u.useLayoutEffect:On;function Fe(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,o;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Fe(e[r],t[r]))return!1;return!0}if(o=Object.keys(e),n=o.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,o[r]))return!1;for(r=n;r--!==0;){const s=o[r];if(!(s==="_owner"&&e.$$typeof)&&!Fe(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Ht(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ft(e,t){const n=Ht(e);return Math.round(t*n)/n}function He(e){const t=u.useRef(e);return ke(()=>{t.current=e}),t}function Dn(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:o,elements:{reference:s,floating:i}={},transform:a=!0,whileElementsMounted:v,open:c}=e,[m,R]=u.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[E,d]=u.useState(r);Fe(E,r)||d(r);const[g,l]=u.useState(null),[x,C]=u.useState(null),p=u.useCallback(f=>{f!==$.current&&($.current=f,l(f))},[]),h=u.useCallback(f=>{f!==L.current&&(L.current=f,C(f))},[]),I=s||g,_=i||x,$=u.useRef(null),L=u.useRef(null),O=u.useRef(m),Y=v!=null,K=He(v),B=He(o),V=He(c),j=u.useCallback(()=>{if(!$.current||!L.current)return;const f={placement:t,strategy:n,middleware:E};B.current&&(f.platform=B.current),Qt($.current,L.current,f).then(S=>{const M={...S,isPositioned:V.current!==!1};b.current&&!Fe(O.current,M)&&(O.current=M,Pt.flushSync(()=>{R(M)}))})},[E,t,n,B,V]);ke(()=>{c===!1&&O.current.isPositioned&&(O.current.isPositioned=!1,R(f=>({...f,isPositioned:!1})))},[c]);const b=u.useRef(!1);ke(()=>(b.current=!0,()=>{b.current=!1}),[]),ke(()=>{if(I&&($.current=I),_&&(L.current=_),I&&_){if(K.current)return K.current(I,_,j);j()}},[I,_,j,K,Y]);const y=u.useMemo(()=>({reference:$,floating:L,setReference:p,setFloating:h}),[p,h]),D=u.useMemo(()=>({reference:I,floating:_}),[I,_]),w=u.useMemo(()=>{const f={position:n,left:0,top:0};if(!D.floating)return f;const S=ft(D.floating,m.x),M=ft(D.floating,m.y);return a?{...f,transform:"translate("+S+"px, "+M+"px)",...Ht(D.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:S,top:M}},[n,a,D.floating,m.x,m.y]);return u.useMemo(()=>({...m,update:j,refs:y,elements:D,floatingStyles:w}),[m,j,y,D,w])}const Nn=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:o}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?st({element:r.current,padding:o}).fn(n):{}:r?st({element:r,padding:o}).fn(n):{}}}},cr=(e,t)=>({...Zt(e),options:[e,t]}),lr=(e,t)=>({...Jt(e),options:[e,t]}),fr=(e,t)=>({...zt(e),options:[e,t]}),dr=(e,t)=>({...Nn(e),options:[e,t]}),_n="data-floating-ui-focusable",dt="active",vt="selected",$n={...It};let mt=!1,Bn=0;const pt=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Bn++;function jn(){const[e,t]=u.useState(()=>mt?pt():void 0);return z(()=>{e==null&&t(pt())},[]),u.useEffect(()=>{mt=!0},[]),e}const Wn=$n.useId,Ne=Wn||jn,vr=u.forwardRef(function(t,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:s,shift:i}},width:a=14,height:v=7,tipRadius:c=0,strokeWidth:m=0,staticOffset:R,stroke:E,d,style:{transform:g,...l}={},...x}=t,C=Ne(),[p,h]=u.useState(!1);if(z(()=>{if(!o)return;Mt(o).direction==="rtl"&&h(!0)},[o]),!o)return null;const[I,_]=r.split("-"),$=I==="top"||I==="bottom";let L=R;($&&i!=null&&i.x||!$&&i!=null&&i.y)&&(L=null);const O=m*2,Y=O/2,K=a/2*(c/-8+1),B=v/2*c/4,V=!!d,j=L&&_==="end"?"bottom":"top";let b=L&&_==="end"?"right":"left";L&&p&&(b=_==="end"?"left":"right");const y=(s==null?void 0:s.x)!=null?L||s.x:"",D=(s==null?void 0:s.y)!=null?L||s.y:"",w=d||"M0,0"+(" H"+a)+(" L"+(a-K)+","+(v-B))+(" Q"+a/2+","+v+" "+K+","+(v-B))+" Z",f={top:V?"rotate(180deg)":"",left:V?"rotate(90deg)":"rotate(-90deg)",bottom:V?"":"rotate(180deg)",right:V?"rotate(-90deg)":"rotate(90deg)"}[I];return Z.jsxs("svg",{...x,"aria-hidden":!0,ref:n,width:V?a:a+O,height:a,viewBox:"0 0 "+a+" "+(v>a?v:a),style:{position:"absolute",pointerEvents:"none",[b]:y,[j]:D,[I]:$||V?"100%":"calc(100% - "+O/2+"px)",transform:[f,g].filter(S=>!!S).join(" "),...l},children:[O>0&&Z.jsx("path",{clipPath:"url(#"+C+")",fill:"none",stroke:E,strokeWidth:O+(d?0:1),d:w}),Z.jsx("path",{stroke:O&&!d?x.fill:"none",d:w}),Z.jsx("clipPath",{id:C,children:Z.jsx("rect",{x:-Y,y:Y*(V?-1:1),width:a+O,height:a})})]})});function Vn(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(o=>o(n))},on(t,n){e.has(t)||e.set(t,new Set),e.get(t).add(n)},off(t,n){var r;(r=e.get(t))==null||r.delete(n)}}}const Kn=u.createContext(null),qn=u.createContext(null),nt=()=>{var e;return((e=u.useContext(Kn))==null?void 0:e.id)||null},_e=()=>u.useContext(qn);function ge(e){return"data-floating-ui-"+e}function te(e){e.current!==-1&&(clearTimeout(e.current),e.current=-1)}const gt=ge("safe-polygon");function Ue(e,t,n){if(n&&!we(n))return 0;if(typeof e=="number")return e;if(typeof e=="function"){const r=e();return typeof r=="number"?r:r==null?void 0:r[t]}return e==null?void 0:e[t]}function Ye(e){return typeof e=="function"?e():e}function mr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=e,{enabled:a=!0,delay:v=0,handleClose:c=null,mouseOnly:m=!1,restMs:R=0,move:E=!0}=t,d=_e(),g=nt(),l=pe(c),x=pe(v),C=pe(n),p=pe(R),h=u.useRef(),I=u.useRef(-1),_=u.useRef(),$=u.useRef(-1),L=u.useRef(!0),O=u.useRef(!1),Y=u.useRef(()=>{}),K=u.useRef(!1),B=Q(()=>{var w;const f=(w=o.current.openEvent)==null?void 0:w.type;return(f==null?void 0:f.includes("mouse"))&&f!=="mousedown"});u.useEffect(()=>{if(!a)return;function w(f){let{open:S}=f;S||(te(I),te($),L.current=!0,K.current=!1)}return s.on("openchange",w),()=>{s.off("openchange",w)}},[a,s]),u.useEffect(()=>{if(!a||!l.current||!n)return;function w(S){B()&&r(!1,S,"hover")}const f=X(i.floating).documentElement;return f.addEventListener("mouseleave",w),()=>{f.removeEventListener("mouseleave",w)}},[i.floating,n,r,a,l,B]);const V=u.useCallback(function(w,f,S){f===void 0&&(f=!0),S===void 0&&(S="hover");const M=Ue(x.current,"close",h.current);M&&!_.current?(te(I),I.current=window.setTimeout(()=>r(!1,w,S),M)):f&&(te(I),r(!1,w,S))},[x,r]),j=Q(()=>{Y.current(),_.current=void 0}),b=Q(()=>{if(O.current){const w=X(i.floating).body;w.style.pointerEvents="",w.removeAttribute(gt),O.current=!1}}),y=Q(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);u.useEffect(()=>{if(!a)return;function w(P){if(te(I),L.current=!1,m&&!we(h.current)||Ye(p.current)>0&&!Ue(x.current,"open"))return;const T=Ue(x.current,"open",h.current);T?I.current=window.setTimeout(()=>{C.current||r(!0,P,"hover")},T):n||r(!0,P,"hover")}function f(P){if(y()){b();return}Y.current();const T=X(i.floating);if(te($),K.current=!1,l.current&&o.current.floatingContext){n||te(I),_.current=l.current({...o.current.floatingContext,tree:d,x:P.clientX,y:P.clientY,onClose(){b(),j(),y()||V(P,!0,"safe-polygon")}});const W=_.current;T.addEventListener("mousemove",W),Y.current=()=>{T.removeEventListener("mousemove",W)};return}(h.current==="touch"?!G(i.floating,P.relatedTarget):!0)&&V(P)}function S(P){y()||o.current.floatingContext&&(l.current==null||l.current({...o.current.floatingContext,tree:d,x:P.clientX,y:P.clientY,onClose(){b(),j(),y()||V(P)}})(P))}function M(){te(I)}function H(P){y()||V(P,!1)}if(J(i.domReference)){const P=i.domReference,T=i.floating;return n&&P.addEventListener("mouseleave",S),E&&P.addEventListener("mousemove",w,{once:!0}),P.addEventListener("mouseenter",w),P.addEventListener("mouseleave",f),T&&(T.addEventListener("mouseleave",S),T.addEventListener("mouseenter",M),T.addEventListener("mouseleave",H)),()=>{n&&P.removeEventListener("mouseleave",S),E&&P.removeEventListener("mousemove",w),P.removeEventListener("mouseenter",w),P.removeEventListener("mouseleave",f),T&&(T.removeEventListener("mouseleave",S),T.removeEventListener("mouseenter",M),T.removeEventListener("mouseleave",H))}}},[i,a,e,m,E,V,j,b,r,n,C,d,x,l,o,y,p]),z(()=>{var w;if(a&&n&&(w=l.current)!=null&&(w=w.__options)!=null&&w.blockPointerEvents&&B()){O.current=!0;const S=i.floating;if(J(i.domReference)&&S){var f;const M=X(i.floating).body;M.setAttribute(gt,"");const H=i.domReference,P=d==null||(f=d.nodesRef.current.find(T=>T.id===g))==null||(f=f.context)==null?void 0:f.elements.floating;return P&&(P.style.pointerEvents=""),M.style.pointerEvents="none",H.style.pointerEvents="auto",S.style.pointerEvents="auto",()=>{M.style.pointerEvents="",H.style.pointerEvents="",S.style.pointerEvents=""}}}},[a,n,g,i,d,l,B]),z(()=>{n||(h.current=void 0,K.current=!1,j(),b())},[n,j,b]),u.useEffect(()=>()=>{j(),te(I),te($),b()},[a,i.domReference,j,b]);const D=u.useMemo(()=>{function w(f){h.current=f.pointerType}return{onPointerDown:w,onPointerEnter:w,onMouseMove(f){const{nativeEvent:S}=f;function M(){!L.current&&!C.current&&r(!0,S,"hover")}m&&!we(h.current)||n||Ye(p.current)===0||K.current&&f.movementX**2+f.movementY**2<2||(te($),h.current==="touch"?M():(K.current=!0,$.current=window.setTimeout(M,Ye(p.current))))}}},[m,r,n,C,p]);return u.useMemo(()=>a?{reference:D}:{},[a,D])}let bt=0;function be(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=t;r&&cancelAnimationFrame(bt);const s=()=>e==null?void 0:e.focus({preventScroll:n});o?s():bt=requestAnimationFrame(s)}function Hn(e){return(e==null?void 0:e.ownerDocument)||document}const Re={inert:new WeakMap,"aria-hidden":new WeakMap,none:new WeakMap};function ht(e){return e==="inert"?Re.inert:e==="aria-hidden"?Re["aria-hidden"]:Re.none}let Ie=new WeakSet,Me={},Ge=0;const Un=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Ut=e=>e&&(e.host||Ut(e.parentNode)),Yn=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=Ut(n);return e.contains(r)?r:null}).filter(n=>n!=null);function Gn(e,t,n,r){const o="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,i=Yn(t,e),a=new Set,v=new Set(i),c=[];Me[o]||(Me[o]=new WeakMap);const m=Me[o];i.forEach(R),E(t),a.clear();function R(d){!d||a.has(d)||(a.add(d),d.parentNode&&R(d.parentNode))}function E(d){!d||v.has(d)||[].forEach.call(d.children,g=>{if(kt(g)!=="script")if(a.has(g))E(g);else{const l=s?g.getAttribute(s):null,x=l!==null&&l!=="false",C=ht(s),p=(C.get(g)||0)+1,h=(m.get(g)||0)+1;C.set(g,p),m.set(g,h),c.push(g),p===1&&x&&Ie.add(g),h===1&&g.setAttribute(o,""),!x&&s&&g.setAttribute(s,s==="inert"?"":"true")}})}return Ge++,()=>{c.forEach(d=>{const g=ht(s),x=(g.get(d)||0)-1,C=(m.get(d)||0)-1;g.set(d,x),m.set(d,C),x||(!Ie.has(d)&&s&&d.removeAttribute(s),Ie.delete(d)),C||d.removeAttribute(o)}),Ge--,Ge||(Re.inert=new WeakMap,Re["aria-hidden"]=new WeakMap,Re.none=new WeakMap,Ie=new WeakSet,Me={})}}function Rt(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=Hn(e[0]).body;return Gn(e.concat(Array.from(r.querySelectorAll('[aria-live],[role="status"],output'))),r,t,n)}const $e={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0},Oe=u.forwardRef(function(t,n){const[r,o]=u.useState();z(()=>{jt()&&o("button")},[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ge("focus-guard")]:"",style:$e};return Z.jsx("span",{...t,...s})}),Yt=u.createContext(null),yt=ge("portal");function Xn(e){e===void 0&&(e={});const{id:t,root:n}=e,r=Ne(),o=Gt(),[s,i]=u.useState(null),a=u.useRef(null);return z(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{a.current=null})},[s]),z(()=>{if(!r||a.current)return;const v=t?document.getElementById(t):null;if(!v)return;const c=document.createElement("div");c.id=r,c.setAttribute(yt,""),v.appendChild(c),a.current=c,i(c)},[t,r]),z(()=>{if(n===null||!r||a.current)return;let v=n||(o==null?void 0:o.portalNode);v&&!rn(v)&&(v=v.current),v=v||document.body;let c=null;t&&(c=document.createElement("div"),c.id=t,v.appendChild(c));const m=document.createElement("div");m.id=r,m.setAttribute(yt,""),v=c||v,v.appendChild(m),a.current=m,i(m)},[t,n,r,o]),s}function pr(e){const{children:t,id:n,root:r,preserveTabOrder:o=!0}=e,s=Xn({id:n,root:r}),[i,a]=u.useState(null),v=u.useRef(null),c=u.useRef(null),m=u.useRef(null),R=u.useRef(null),E=i==null?void 0:i.modal,d=i==null?void 0:i.open,g=!!i&&!i.modal&&i.open&&o&&!!(r||s);return u.useEffect(()=>{if(!s||!o||E)return;function l(x){s&&Ee(x)&&(x.type==="focusin"?lt:Ln)(s)}return s.addEventListener("focusin",l,!0),s.addEventListener("focusout",l,!0),()=>{s.removeEventListener("focusin",l,!0),s.removeEventListener("focusout",l,!0)}},[s,o,E]),u.useEffect(()=>{s&&(d||lt(s))},[d,s]),Z.jsxs(Yt.Provider,{value:u.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:v,afterOutsideRef:c,beforeInsideRef:m,afterInsideRef:R,portalNode:s,setFocusManagerState:a}),[o,s]),children:[g&&s&&Z.jsx(Oe,{"data-type":"outside",ref:v,onFocus:l=>{if(Ee(l,s)){var x;(x=m.current)==null||x.focus()}else{const C=i?i.domReference:null,p=qt(C);p==null||p.focus()}}}),g&&s&&Z.jsx("span",{"aria-owns":s.id,style:$e}),s&&Pt.createPortal(t,s),g&&s&&Z.jsx(Oe,{"data-type":"outside",ref:c,onFocus:l=>{if(Ee(l,s)){var x;(x=R.current)==null||x.focus()}else{const C=i?i.domReference:null,p=Kt(C);p==null||p.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,l.nativeEvent,"focus-out"))}}})]})}const Gt=()=>u.useContext(Yt);function Et(e){return u.useMemo(()=>t=>{e.forEach(n=>{n&&(n.current=t)})},e)}const Zn=20;let ve=[];function rt(){ve=ve.filter(e=>e.isConnected)}function zn(e){rt(),e&&kt(e)!=="body"&&(ve.push(e),ve.length>Zn&&(ve=ve.slice(-20)))}function xt(){return rt(),ve[ve.length-1]}function Jn(e){const t=Te();return _t(e,t)?e:De(e,t)[0]||e}function wt(e,t){var n;if(!t.current.includes("floating")&&!((n=e.getAttribute("role"))!=null&&n.includes("dialog")))return;const r=Te(),s=Rn(e,r).filter(a=>{const v=a.getAttribute("data-tabindex")||"";return _t(a,r)||a.hasAttribute("data-tabindex")&&!v.startsWith("-")}),i=e.getAttribute("tabindex");t.current.includes("floating")||s.length===0?i!=="0"&&e.setAttribute("tabindex","0"):(i!=="-1"||e.hasAttribute("data-tabindex")&&e.getAttribute("data-tabindex")!=="-1")&&(e.setAttribute("tabindex","-1"),e.setAttribute("data-tabindex","-1"))}const Qn=u.forwardRef(function(t,n){return Z.jsx("button",{...t,type:"button",ref:n,tabIndex:-1,style:$e})});function gr(e){const{context:t,children:n,disabled:r=!1,order:o=["content"],guards:s=!0,initialFocus:i=0,returnFocus:a=!0,restoreFocus:v=!1,modal:c=!0,visuallyHiddenDismiss:m=!1,closeOnFocusOut:R=!0,outsideElementsInert:E=!1,getInsideElements:d=()=>[]}=e,{open:g,onOpenChange:l,events:x,dataRef:C,elements:{domReference:p,floating:h}}=t,I=Q(()=>{var k;return(k=C.current.floatingContext)==null?void 0:k.nodeId}),_=Q(d),$=typeof i=="number"&&i<0,L=at(p)&&$,O=Un(),Y=O?s:!0,K=!Y||O&&E,B=pe(o),V=pe(i),j=pe(a),b=_e(),y=Gt(),D=u.useRef(null),w=u.useRef(null),f=u.useRef(!1),S=u.useRef(!1),M=u.useRef(-1),H=u.useRef(-1),P=y!=null,T=et(h),oe=Q(function(k){return k===void 0&&(k=T),k?De(k,Te()):[]}),W=Q(k=>{const F=oe(k);return B.current.map(A=>p&&A==="reference"?p:T&&A==="floating"?T:F).filter(Boolean).flat()});u.useEffect(()=>{if(r||!c)return;function k(A){if(A.key==="Tab"){G(T,de(X(T)))&&oe().length===0&&!L&&qe(A);const q=W(),U=ae(A);B.current[0]==="reference"&&U===p&&(qe(A),A.shiftKey?be(q[q.length-1]):be(q[1])),B.current[1]==="floating"&&U===T&&A.shiftKey&&(qe(A),be(q[0]))}}const F=X(T);return F.addEventListener("keydown",k),()=>{F.removeEventListener("keydown",k)}},[r,p,T,c,B,L,oe,W]),u.useEffect(()=>{if(r||!h)return;function k(F){const A=ae(F),U=oe().indexOf(A);U!==-1&&(M.current=U)}return h.addEventListener("focusin",k),()=>{h.removeEventListener("focusin",k)}},[r,h,oe]),u.useEffect(()=>{if(r||!R)return;function k(){S.current=!0,setTimeout(()=>{S.current=!1})}function F(U){const N=U.relatedTarget,ie=U.currentTarget,re=ae(U);queueMicrotask(()=>{const ee=I(),me=!(G(p,N)||G(h,N)||G(N,h)||G(y==null?void 0:y.portalNode,N)||N!=null&&N.hasAttribute(ge("focus-guard"))||b&&(he(b.nodesRef.current,ee).find(le=>{var ue,fe;return G((ue=le.context)==null?void 0:ue.elements.floating,N)||G((fe=le.context)==null?void 0:fe.elements.domReference,N)})||ct(b.nodesRef.current,ee).find(le=>{var ue,fe,ot;return[(ue=le.context)==null?void 0:ue.elements.floating,et((fe=le.context)==null?void 0:fe.elements.floating)].includes(N)||((ot=le.context)==null?void 0:ot.elements.domReference)===N})));if(ie===p&&T&&wt(T,B),v&&ie!==p&&!(re!=null&&re.isConnected)&&de(X(T))===X(T).body){se(T)&&T.focus();const le=M.current,ue=oe(),fe=ue[le]||ue[ue.length-1]||T;se(fe)&&fe.focus()}if(C.current.insideReactTree){C.current.insideReactTree=!1;return}(L||!c)&&N&&me&&!S.current&&N!==xt()&&(f.current=!0,l(!1,U,"focus-out"))})}const A=!!(!b&&y);function q(){te(H),C.current.insideReactTree=!0,H.current=window.setTimeout(()=>{C.current.insideReactTree=!1})}if(h&&se(p))return p.addEventListener("focusout",F),p.addEventListener("pointerdown",k),h.addEventListener("focusout",F),A&&h.addEventListener("focusout",q,!0),()=>{p.removeEventListener("focusout",F),p.removeEventListener("pointerdown",k),h.removeEventListener("focusout",F),A&&h.removeEventListener("focusout",q,!0)}},[r,p,h,T,c,b,y,l,R,v,oe,L,I,B,C]);const ne=u.useRef(null),ce=u.useRef(null),Be=Et([ne,y==null?void 0:y.beforeInsideRef]),je=Et([ce,y==null?void 0:y.afterInsideRef]);u.useEffect(()=>{var k,F;if(r||!h)return;const A=Array.from((y==null||(k=y.portalNode)==null?void 0:k.querySelectorAll("["+ge("portal")+"]"))||[]),U=(F=(b?ct(b.nodesRef.current,I()):[]).find(re=>{var ee;return at(((ee=re.context)==null?void 0:ee.elements.domReference)||null)}))==null||(F=F.context)==null?void 0:F.elements.domReference,N=[h,U,...A,..._(),D.current,w.current,ne.current,ce.current,y==null?void 0:y.beforeOutsideRef.current,y==null?void 0:y.afterOutsideRef.current,B.current.includes("reference")||L?p:null].filter(re=>re!=null),ie=c||L?Rt(N,!K,K):Rt(N);return()=>{ie()}},[r,p,h,c,B,y,L,Y,K,b,I,_]),z(()=>{if(r||!se(T))return;const k=X(T),F=de(k);queueMicrotask(()=>{const A=W(T),q=V.current,U=(typeof q=="number"?A[q]:q.current)||T,N=G(T,F);!$&&!N&&g&&be(U,{preventScroll:U===T})})},[r,g,T,$,W,V]),z(()=>{if(r||!T)return;const k=X(T),F=de(k);zn(F);function A(N){let{reason:ie,event:re,nested:ee}=N;if(["hover","safe-polygon"].includes(ie)&&re.type==="mouseleave"&&(f.current=!0),ie==="outside-press")if(ee)f.current=!1;else if(Cn(re)||Sn(re))f.current=!1;else{let me=!1;document.createElement("div").focus({get preventScroll(){return me=!0,!1}}),me?f.current=!1:f.current=!0}}x.on("openchange",A);const q=k.createElement("span");q.setAttribute("tabindex","-1"),q.setAttribute("aria-hidden","true"),Object.assign(q.style,$e),P&&p&&p.insertAdjacentElement("afterend",q);function U(){if(typeof j.current=="boolean"){const N=p||xt();return N&&N.isConnected?N:q}return j.current.current||q}return()=>{x.off("openchange",A);const N=de(k),ie=G(h,N)||b&&he(b.nodesRef.current,I(),!1).some(ee=>{var me;return G((me=ee.context)==null?void 0:me.elements.floating,N)}),re=U();queueMicrotask(()=>{const ee=Jn(re);j.current&&!f.current&&se(ee)&&(!(ee!==N&&N!==k.body)||ie)&&ee.focus({preventScroll:!0}),q.remove()})}},[r,h,T,j,C,x,b,P,p,I]),u.useEffect(()=>(queueMicrotask(()=>{f.current=!1}),()=>{queueMicrotask(rt)}),[r]),z(()=>{if(!r&&y)return y.setFocusManagerState({modal:c,closeOnFocusOut:R,open:g,onOpenChange:l,domReference:p}),()=>{y.setFocusManagerState(null)}},[r,y,c,g,l,R,p]),z(()=>{r||T&&wt(T,B)},[r,T,B]);function Ce(k){return r||!m||!c?null:Z.jsx(Qn,{ref:k==="start"?D:w,onClick:F=>l(!1,F.nativeEvent),children:typeof m=="string"?m:"Dismiss"})}const Se=!r&&Y&&(c?!L:!0)&&(P||c);return Z.jsxs(Z.Fragment,{children:[Se&&Z.jsx(Oe,{"data-type":"inside",ref:Be,onFocus:k=>{if(c){const A=W();be(o[0]==="reference"?A[0]:A[A.length-1])}else if(y!=null&&y.preserveTabOrder&&y.portalNode)if(f.current=!1,Ee(k,y.portalNode)){const A=Kt(p);A==null||A.focus()}else{var F;(F=y.beforeOutsideRef.current)==null||F.focus()}}}),!L&&Ce("start"),n,Ce("end"),Se&&Z.jsx(Oe,{"data-type":"inside",ref:je,onFocus:k=>{if(c)be(W()[0]);else if(y!=null&&y.preserveTabOrder&&y.portalNode)if(R&&(f.current=!0),Ee(k,y.portalNode)){const A=qt(p);A==null||A.focus()}else{var F;(F=y.afterOutsideRef.current)==null||F.focus()}}})]})}function Tt(e){return se(e.target)&&e.target.tagName==="BUTTON"}function er(e){return se(e.target)&&e.target.tagName==="A"}function Ct(e){return tt(e)}function br(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:s}}=e,{enabled:i=!0,event:a="click",toggle:v=!0,ignoreMouse:c=!1,keyboardHandlers:m=!0,stickIfOpen:R=!0}=t,E=u.useRef(),d=u.useRef(!1),g=u.useMemo(()=>({onPointerDown(l){E.current=l.pointerType},onMouseDown(l){const x=E.current;l.button===0&&a!=="click"&&(we(x,!0)&&c||(n&&v&&(!(o.current.openEvent&&R)||o.current.openEvent.type==="mousedown")?r(!1,l.nativeEvent,"click"):(l.preventDefault(),r(!0,l.nativeEvent,"click"))))},onClick(l){const x=E.current;if(a==="mousedown"&&E.current){E.current=void 0;return}we(x,!0)&&c||(n&&v&&(!(o.current.openEvent&&R)||o.current.openEvent.type==="click")?r(!1,l.nativeEvent,"click"):r(!0,l.nativeEvent,"click"))},onKeyDown(l){E.current=void 0,!(l.defaultPrevented||!m||Tt(l))&&(l.key===" "&&!Ct(s)&&(l.preventDefault(),d.current=!0),!er(l)&&l.key==="Enter"&&r(!(n&&v),l.nativeEvent,"click"))},onKeyUp(l){l.defaultPrevented||!m||Tt(l)||Ct(s)||l.key===" "&&d.current&&(d.current=!1,r(!(n&&v),l.nativeEvent,"click"))}}),[o,s,a,c,m,r,n,R,v]);return u.useMemo(()=>i?{reference:g}:{},[i,g])}const tr={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},nr={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},St=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function hr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=e,{enabled:i=!0,escapeKey:a=!0,outsidePress:v=!0,outsidePressEvent:c="pointerdown",referencePress:m=!1,referencePressEvent:R="pointerdown",ancestorScroll:E=!1,bubbles:d,capture:g}=t,l=_e(),x=Q(typeof v=="function"?v:()=>!1),C=typeof v=="function"?x:v,p=u.useRef(!1),{escapeKey:h,outsidePress:I}=St(d),{escapeKey:_,outsidePress:$}=St(g),L=u.useRef(!1),O=Q(b=>{var y;if(!n||!i||!a||b.key!=="Escape"||L.current)return;const D=(y=s.current.floatingContext)==null?void 0:y.nodeId,w=l?he(l.nodesRef.current,D):[];if(!h&&(b.stopPropagation(),w.length>0)){let f=!0;if(w.forEach(S=>{var M;if((M=S.context)!=null&&M.open&&!S.context.dataRef.current.__escapeKeyBubbles){f=!1;return}}),!f)return}r(!1,Tn(b)?b.nativeEvent:b,"escape-key")}),Y=Q(b=>{var y;const D=()=>{var w;O(b),(w=ae(b))==null||w.removeEventListener("keydown",D)};(y=ae(b))==null||y.addEventListener("keydown",D)}),K=Q(b=>{var y;const D=s.current.insideReactTree;s.current.insideReactTree=!1;const w=p.current;if(p.current=!1,c==="click"&&w||D||typeof C=="function"&&!C(b))return;const f=ae(b),S="["+ge("inert")+"]",M=X(o.floating).querySelectorAll(S);let H=J(f)?f:null;for(;H&&!Ve(H);){const W=nn(H);if(Ve(W)||!J(W))break;H=W}if(M.length&&J(f)&&!xn(f)&&!G(f,o.floating)&&Array.from(M).every(W=>!G(H,W)))return;if(se(f)&&j){const W=Ve(f),ne=Mt(f),ce=/auto|scroll/,Be=W||ce.test(ne.overflowX),je=W||ce.test(ne.overflowY),Ce=Be&&f.clientWidth>0&&f.scrollWidth>f.clientWidth,Se=je&&f.clientHeight>0&&f.scrollHeight>f.clientHeight,k=ne.direction==="rtl",F=Se&&(k?b.offsetX<=f.offsetWidth-f.clientWidth:b.offsetX>f.clientWidth),A=Ce&&b.offsetY>f.clientHeight;if(F||A)return}const P=(y=s.current.floatingContext)==null?void 0:y.nodeId,T=l&&he(l.nodesRef.current,P).some(W=>{var ne;return Ke(b,(ne=W.context)==null?void 0:ne.elements.floating)});if(Ke(b,o.floating)||Ke(b,o.domReference)||T)return;const oe=l?he(l.nodesRef.current,P):[];if(oe.length>0){let W=!0;if(oe.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){W=!1;return}}),!W)return}r(!1,b,"outside-press")}),B=Q(b=>{var y;const D=()=>{var w;K(b),(w=ae(b))==null||w.removeEventListener(c,D)};(y=ae(b))==null||y.addEventListener(c,D)});u.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=h,s.current.__outsidePressBubbles=I;let b=-1;function y(M){r(!1,M,"ancestor-scroll")}function D(){window.clearTimeout(b),L.current=!0}function w(){b=window.setTimeout(()=>{L.current=!1},tn()?5:0)}const f=X(o.floating);a&&(f.addEventListener("keydown",_?Y:O,_),f.addEventListener("compositionstart",D),f.addEventListener("compositionend",w)),C&&f.addEventListener(c,$?B:K,$);let S=[];return E&&(J(o.domReference)&&(S=We(o.domReference)),J(o.floating)&&(S=S.concat(We(o.floating))),!J(o.reference)&&o.reference&&o.reference.contextElement&&(S=S.concat(We(o.reference.contextElement)))),S=S.filter(M=>{var H;return M!==((H=f.defaultView)==null?void 0:H.visualViewport)}),S.forEach(M=>{M.addEventListener("scroll",y,{passive:!0})}),()=>{a&&(f.removeEventListener("keydown",_?Y:O,_),f.removeEventListener("compositionstart",D),f.removeEventListener("compositionend",w)),C&&f.removeEventListener(c,$?B:K,$),S.forEach(M=>{M.removeEventListener("scroll",y)}),window.clearTimeout(b)}},[s,o,a,C,c,n,r,E,i,h,I,O,_,Y,K,$,B]),u.useEffect(()=>{s.current.insideReactTree=!1},[s,C,c]);const V=u.useMemo(()=>({onKeyDown:O,...m&&{[tr[R]]:b=>{r(!1,b.nativeEvent,"reference-press")},...R!=="click"&&{onClick(b){r(!1,b.nativeEvent,"reference-press")}}}}),[O,r,m,R]),j=u.useMemo(()=>({onKeyDown:O,onMouseDown(){p.current=!0},onMouseUp(){p.current=!0},[nr[c]]:()=>{s.current.insideReactTree=!0}}),[O,c,s]);return u.useMemo(()=>i?{reference:V,floating:j}:{},[i,V,j])}function rr(e){const{open:t=!1,onOpenChange:n,elements:r}=e,o=Ne(),s=u.useRef({}),[i]=u.useState(()=>Vn()),a=nt()!=null,[v,c]=u.useState(r.reference),m=Q((d,g,l)=>{s.current.openEvent=d?g:void 0,i.emit("openchange",{open:d,event:g,reason:l,nested:a}),n==null||n(d,g,l)}),R=u.useMemo(()=>({setPositionReference:c}),[]),E=u.useMemo(()=>({reference:v||r.reference||null,floating:r.floating||null,domReference:r.reference}),[v,r.reference,r.floating]);return u.useMemo(()=>({dataRef:s,open:t,onOpenChange:m,elements:E,events:i,floatingId:o,refs:R}),[t,m,E,i,o,R])}function Rr(e){e===void 0&&(e={});const{nodeId:t}=e,n=rr({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,o=r.elements,[s,i]=u.useState(null),[a,v]=u.useState(null),m=(o==null?void 0:o.domReference)||s,R=u.useRef(null),E=_e();z(()=>{m&&(R.current=m)},[m]);const d=Dn({...e,elements:{...o,...a&&{reference:a}}}),g=u.useCallback(h=>{const I=J(h)?{getBoundingClientRect:()=>h.getBoundingClientRect(),getClientRects:()=>h.getClientRects(),contextElement:h}:h;v(I),d.refs.setReference(I)},[d.refs]),l=u.useCallback(h=>{(J(h)||h===null)&&(R.current=h,i(h)),(J(d.refs.reference.current)||d.refs.reference.current===null||h!==null&&!J(h))&&d.refs.setReference(h)},[d.refs]),x=u.useMemo(()=>({...d.refs,setReference:l,setPositionReference:g,domReference:R}),[d.refs,l,g]),C=u.useMemo(()=>({...d.elements,domReference:m}),[d.elements,m]),p=u.useMemo(()=>({...d,...r,refs:x,elements:C,nodeId:t}),[d,x,C,t,r]);return z(()=>{r.dataRef.current.floatingContext=p;const h=E==null?void 0:E.nodesRef.current.find(I=>I.id===t);h&&(h.context=p)}),u.useMemo(()=>({...d,context:p,refs:x,elements:C}),[d,x,C,p])}function Xe(){return yn()&&jt()}function yr(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=e,{enabled:a=!0,visibleOnly:v=!0}=t,c=u.useRef(!1),m=u.useRef(-1),R=u.useRef(!0);u.useEffect(()=>{if(!a)return;const d=en(i.domReference);function g(){!n&&se(i.domReference)&&i.domReference===de(X(i.domReference))&&(c.current=!0)}function l(){R.current=!0}function x(){R.current=!1}return d.addEventListener("blur",g),Xe()&&(d.addEventListener("keydown",l,!0),d.addEventListener("pointerdown",x,!0)),()=>{d.removeEventListener("blur",g),Xe()&&(d.removeEventListener("keydown",l,!0),d.removeEventListener("pointerdown",x,!0))}},[i.domReference,n,a]),u.useEffect(()=>{if(!a)return;function d(g){let{reason:l}=g;(l==="reference-press"||l==="escape-key")&&(c.current=!0)}return o.on("openchange",d),()=>{o.off("openchange",d)}},[o,a]),u.useEffect(()=>()=>{te(m)},[]);const E=u.useMemo(()=>({onMouseLeave(){c.current=!1},onFocus(d){if(c.current)return;const g=ae(d.nativeEvent);if(v&&J(g)){if(Xe()&&!d.relatedTarget){if(!R.current&&!tt(g))return}else if(!wn(g))return}r(!0,d.nativeEvent,"focus")},onBlur(d){c.current=!1;const g=d.relatedTarget,l=d.nativeEvent,x=J(g)&&g.hasAttribute(ge("focus-guard"))&&g.getAttribute("data-type")==="outside";m.current=window.setTimeout(()=>{var C;const p=de(i.domReference?i.domReference.ownerDocument:document);!g&&p===i.domReference||G((C=s.current.floatingContext)==null?void 0:C.refs.floating.current,p)||G(i.domReference,p)||x||r(!1,l,"focus")})}}),[s,i.domReference,r,v]);return u.useMemo(()=>a?{reference:E}:{},[a,E])}function Ze(e,t,n){const r=new Map,o=n==="item";let s=e;if(o&&e){const{[dt]:i,[vt]:a,...v}=e;s=v}return{...n==="floating"&&{tabIndex:-1,[_n]:""},...s,...t.map(i=>{const a=i?i[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((i,a)=>(a&&Object.entries(a).forEach(v=>{let[c,m]=v;if(!(o&&[dt,vt].includes(c)))if(c.indexOf("on")===0){if(r.has(c)||r.set(c,[]),typeof m=="function"){var R;(R=r.get(c))==null||R.push(m),i[c]=function(){for(var E,d=arguments.length,g=new Array(d),l=0;l<d;l++)g[l]=arguments[l];return(E=r.get(c))==null?void 0:E.map(x=>x(...g)).find(x=>x!==void 0)}}}else i[c]=m}),i),{})}}function Er(e){e===void 0&&(e=[]);const t=e.map(a=>a==null?void 0:a.reference),n=e.map(a=>a==null?void 0:a.floating),r=e.map(a=>a==null?void 0:a.item),o=u.useCallback(a=>Ze(a,e,"reference"),t),s=u.useCallback(a=>Ze(a,e,"floating"),n),i=u.useCallback(a=>Ze(a,e,"item"),r);return u.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const or=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function xr(e,t){var n,r;t===void 0&&(t={});const{open:o,elements:s,floatingId:i}=e,{enabled:a=!0,role:v="dialog"}=t,c=Ne(),m=((n=s.domReference)==null?void 0:n.id)||c,R=u.useMemo(()=>{var p;return((p=et(s.floating))==null?void 0:p.id)||i},[s.floating,i]),E=(r=or.get(v))!=null?r:v,g=nt()!=null,l=u.useMemo(()=>E==="tooltip"||v==="label"?{["aria-"+(v==="label"?"labelledby":"describedby")]:o?R:void 0}:{"aria-expanded":o?"true":"false","aria-haspopup":E==="alertdialog"?"dialog":E,"aria-controls":o?R:void 0,...E==="listbox"&&{role:"combobox"},...E==="menu"&&{id:m},...E==="menu"&&g&&{role:"menuitem"},...v==="select"&&{"aria-autocomplete":"none"},...v==="combobox"&&{"aria-autocomplete":"list"}},[E,R,g,o,m,v]),x=u.useMemo(()=>{const p={id:R,...E&&{role:E}};return E==="tooltip"||v==="label"?p:{...p,...E==="menu"&&{"aria-labelledby":m}}},[E,R,m,v]),C=u.useCallback(p=>{let{active:h,selected:I}=p;const _={role:"option",...h&&{id:R+"-fui-option"}};switch(v){case"select":case"combobox":return{..._,"aria-selected":I}}return{}},[R,v]);return u.useMemo(()=>a?{reference:l,floating:x,item:C}:{},[a,l,x,C])}export{gr as F,br as a,hr as b,xr as c,Er as d,Ne as e,fr as f,mr as g,yr as h,pr as i,vr as j,dr as k,cr as o,lr as s,Rr as u};
