import{j as h}from"./jsx-runtime-Yb_4y5hn.js";import{r as t}from"./index-BwDkhjyp.js";import{r as S}from"./index-Jr15HXM4.js";import{P as y}from"./config-BV4l-vIF.js";function _(e){t.useEffect(()=>{e?(document.body.style.overflow="hidden",document.body.style.paddingRight="0"):(document.body.style.overflow="unset",document.body.style.paddingRight="unset")},[e])}function q(e){const[o,i]=t.useState(!1);return t.useEffect(()=>{const c=document.querySelector(`#${e}`);c&&c.remove();const r=document.createElement("div");r.id=e,r.className="d-portal",document.body.appendChild(r),i(!0)},[e]),{created:o}}function L(e=[]){const[o,i]=t.useState(e),c=t.useCallback(a=>i(g=>[...g,a]),[]),r=t.useCallback(()=>i(a=>a.slice(0,a.length-1)),[]),u=t.useCallback(()=>o.at(-1),[o]),p=t.useCallback(()=>i([]),[]),s=t.useCallback(()=>o.length===0,[o.length]),x=t.useMemo(()=>({clear:p,isEmpty:s,length:o.length,peek:u,pop:r,push:c}),[p,s,o.length,u,r,c]);return[o,x]}function $(e){return e?[...e.querySelectorAll('a, button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')].filter(o=>!o.hasAttribute("disabled")):[]}const w=t.createContext(void 0);function k({portalName:e,children:o,availablePortals:i}){const{created:c}=q(e),[r,{push:u,pop:p,isEmpty:s}]=L([]);_(!!r.length);const x=t.useCallback((n,l)=>{var f;if(!i)throw new Error(`there is no component for portal ${n.toString()}`);const d=i[n];if(!d)throw new Error(`there is no component for portal ${n.toString()}`);u({name:n,Component:d,payload:l}),(f=document.activeElement)==null||f.blur()},[i,u]),a=t.useCallback(()=>{s()||p()},[s,p]),g=t.useMemo(()=>({stack:r,openPortal:x,closePortal:a}),[r,x,a]),b=t.useCallback(n=>{if(n instanceof HTMLDivElement){if(n.classList.contains("portal")&&!("bsBackdrop"in n.dataset)){a();return}if(n.classList.contains("backdrop")){const l=n.nextElementSibling;l&&l.classList.contains("portal")&&!("bsBackdrop"in l.dataset)&&a()}}},[a]);return t.useEffect(()=>{const n=l=>{const d=document.querySelector(`#${e} > div > div:last-child`);if(l.key==="Escape"&&d){b(d);return}if(l.key==="Tab"){const f=$(d);if(f.length===0)return;const C=f[0],P=f[f.length-1];l.shiftKey&&document.activeElement===C?(l.preventDefault(),P.focus()):!l.shiftKey&&document.activeElement===P&&(l.preventDefault(),C.focus())}};return r.length!==0&&window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[b,e,r.length]),h.jsxs(w.Provider,{value:g,children:[o,c&&S.createPortal(h.jsx("div",{onClick:({target:n})=>b(n),onKeyDown:()=>{},children:r.map(({Component:n,name:l,payload:d})=>h.jsxs(t.Fragment,{children:[h.jsx("div",{className:"backdrop fade show"}),h.jsx(n,{name:l,payload:d})]},l))}),document.getElementById(e))]})}function I(){const e=t.useContext(w);if(e===void 0)throw new Error("usePortalContext was used outside of PortalContextProvider");return e}try{k.displayName="DPortalContextProvider",k.__docgenInfo={description:"",displayName:"DPortalContextProvider",props:{portalName:{defaultValue:null,description:"",name:"portalName",required:!0,type:{name:"string"}},availablePortals:{defaultValue:null,description:"",name:"availablePortals",required:!1,type:{name:"PortalAvailableList<T> | undefined"}}}}}catch{}function v(e){return getComputedStyle(document.documentElement).getPropertyValue(e).trim()}const m={language:"en",currency:{symbol:"$",precision:2,separator:",",decimal:"."},icon:{familyClass:"bi",familyPrefix:"bi-",materialStyle:!1},iconMap:{x:"x",xLg:"x-lg",chevronUp:"chevron-up",chevronDown:"chevron-down",chevronLeft:"chevron-left",chevronRight:"chevron-right",upload:"cloud-upload",calendar:"calendar",check:"check",alert:{warning:"exclamation-circle",danger:"exclamation-triangle",success:"check-circle",info:"info-circle",dark:"info-circle",light:"info-circle",primary:"info-circle",secondary:"info-circle"},input:{invalid:"exclamation-circle",valid:"check",search:"search",show:"eye",hide:"eye-slash",increase:"plus-square",decrease:"dash-square"}},breakpoints:{xs:"",sm:"",md:"",lg:"",xl:"",xxl:""},setContext:()=>{},portalName:"d-portal"},D=t.createContext(m);function E({language:e=m.language,currency:o=m.currency,icon:i=m.icon,iconMap:c=m.iconMap,portalName:r=m.portalName,availablePortals:u,children:p}){const[s,x]=t.useState({language:e,currency:o,icon:i,iconMap:c,breakpoints:m.breakpoints}),a=t.useCallback(b=>x(n=>({...n,...b})),[]);t.useLayoutEffect(()=>{a({breakpoints:{xs:v(`--${y}breakpoint-xs`),sm:v(`--${y}breakpoint-sm`),md:v(`--${y}breakpoint-md`),lg:v(`--${y}breakpoint-lg`),xl:v(`--${y}breakpoint-xl`),xxl:v(`--${y}breakpoint-xxl`)}})},[a]);const g=t.useMemo(()=>({...s,setContext:a}),[s,a]);return h.jsx(D.Provider,{value:g,children:h.jsx(k,{portalName:r,availablePortals:u,children:p})})}function N(){const e=t.useContext(D);if(e===void 0)throw new Error("useDContext was used outside of DContextProvider");return e}try{E.displayName="DContextProvider",E.__docgenInfo={description:"",displayName:"DContextProvider",props:{language:{defaultValue:{value:"en"},description:"",name:"language",required:!1,type:{name:"string | undefined"}},currency:{defaultValue:{value:`{
    symbol: '$',
    precision: 2,
    separator: ',',
    decimal: '.',
  }`},description:"",name:"currency",required:!1,type:{name:"CurrencyProps | undefined"}},icon:{defaultValue:{value:`{
    familyClass: 'bi',
    familyPrefix: 'bi-',
    materialStyle: false,
  }`},description:"",name:"icon",required:!1,type:{name:"IconProps | undefined"}},iconMap:{defaultValue:{value:`{
    x: 'x',
    xLg: 'x-lg',
    chevronUp: 'chevron-up',
    chevronDown: 'chevron-down',
    chevronLeft: 'chevron-left',
    chevronRight: 'chevron-right',
    upload: 'cloud-upload',
    calendar: 'calendar',
    check: 'check',
    alert: {
      warning: 'exclamation-circle',
      danger: 'exclamation-triangle',
      success: 'check-circle',
      info: 'info-circle',
      dark: 'info-circle',
      light: 'info-circle',
      primary: 'info-circle',
      secondary: 'info-circle',
    },
    input: {
      invalid: 'exclamation-circle',
      valid: 'check',
      search: 'search',
      show: 'eye',
      hide: 'eye-slash',
      increase: 'plus-square',
      decrease: 'dash-square',
    },
  }`},description:"",name:"iconMap",required:!1,type:{name:"IconMapProps | undefined"}},breakpoints:{defaultValue:null,description:"",name:"breakpoints",required:!1,type:{name:"BreakpointProps | undefined"}},portalName:{defaultValue:{value:"d-portal"},description:"",name:"portalName",required:!1,type:{name:"string | undefined"}},availablePortals:{defaultValue:null,description:"",name:"availablePortals",required:!1,type:{name:"PortalAvailableList<T> | undefined"}}}}}catch{}export{E as D,I as a,N as u};
