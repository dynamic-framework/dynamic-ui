import{o as J,f as K,s as N,c as Q,a as v}from"./floating-ui.dom-BCD-wpiz.js";import{r as f}from"./index-BwDkhjyp.js";import{r as T}from"./index-Jr15HXM4.js";var R=typeof document<"u"?f.useLayoutEffect:f.useEffect;function h(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!h(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const p=s[r];if(!(p==="_owner"&&e.$$typeof)&&!h(e[p],t[p]))return!1}return!0}return e!==e&&t!==t}function q(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function A(e,t){const n=q(e);return Math.round(t*n)/n}function k(e){const t=f.useRef(e);return R(()=>{t.current=e}),t}function b(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:p,floating:B}={},transform:D=!0,whileElementsMounted:$,open:x}=e,[u,_]=f.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[M,V]=f.useState(r);h(M,r)||V(r);const[W,z]=f.useState(null),[G,H]=f.useState(null),C=f.useCallback(o=>{o!==a.current&&(a.current=o,z(o))},[]),F=f.useCallback(o=>{o!==d.current&&(d.current=o,H(o))},[]),i=p||W,c=B||G,a=f.useRef(null),d=f.useRef(null),y=f.useRef(u),I=$!=null,P=k($),E=k(s),O=k(x),g=f.useCallback(()=>{if(!a.current||!d.current)return;const o={placement:t,strategy:n,middleware:M};E.current&&(o.platform=E.current),Q(a.current,d.current,o).then(w=>{const m={...w,isPositioned:O.current!==!1};S.current&&!h(y.current,m)&&(y.current=m,T.flushSync(()=>{_(m)}))})},[M,t,n,E,O]);R(()=>{x===!1&&y.current.isPositioned&&(y.current.isPositioned=!1,_(o=>({...o,isPositioned:!1})))},[x]);const S=f.useRef(!1);R(()=>(S.current=!0,()=>{S.current=!1}),[]),R(()=>{if(i&&(a.current=i),c&&(d.current=c),i&&c){if(P.current)return P.current(i,c,g);g()}},[i,c,g,P,I]);const j=f.useMemo(()=>({reference:a,floating:d,setReference:C,setFloating:F}),[C,F]),l=f.useMemo(()=>({reference:i,floating:c}),[i,c]),L=f.useMemo(()=>{const o={position:n,left:0,top:0};if(!l.floating)return o;const w=A(l.floating,u.x),m=A(l.floating,u.y);return D?{...o,transform:"translate("+w+"px, "+m+"px)",...q(l.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:w,top:m}},[n,D,l.floating,u.x,u.y]);return f.useMemo(()=>({...u,update:g,refs:j,elements:l,floatingStyles:L}),[u,g,j,l,L])}const U=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?v({element:r.current,padding:s}).fn(n):{}:r?v({element:r,padding:s}).fn(n):{}}}},ee=(e,t)=>({...J(e),options:[e,t]}),te=(e,t)=>({...N(e),options:[e,t]}),ne=(e,t)=>({...K(e),options:[e,t]}),re=(e,t)=>({...U(e),options:[e,t]});export{re as a,ne as f,ee as o,te as s,b as u};
