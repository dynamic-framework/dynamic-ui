import{r as a,a as Rt}from"./index-BwDkhjyp.js";import{i as wt,d as ee,e as G,g as Tt,h as Me,j as ot,k as xt,l as Ve,m as Ct,n as it}from"./floating-ui.dom-BCD-wpiz.js";import{r as St}from"./index-Jr15HXM4.js";import{u as It}from"./floating-ui.react-dom-DfVPpsSe.js";/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var kt=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],ye=kt.join(","),st=typeof Element>"u",le=st?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Re=!st&&Element.prototype.getRootNode?function(t){var e;return t==null||(e=t.getRootNode)===null||e===void 0?void 0:e.call(t)}:function(t){return t==null?void 0:t.ownerDocument},we=function t(e,n){var r;n===void 0&&(n=!0);var o=e==null||(r=e.getAttribute)===null||r===void 0?void 0:r.call(e,"inert"),s=o===""||o==="true",i=s||n&&e&&t(e.parentNode);return i},Mt=function(e){var n,r=e==null||(n=e.getAttribute)===null||n===void 0?void 0:n.call(e,"contenteditable");return r===""||r==="true"},Pt=function(e,n,r){if(we(e))return[];var o=Array.prototype.slice.apply(e.querySelectorAll(ye));return n&&le.call(e,ye)&&o.unshift(e),o=o.filter(r),o},At=function t(e,n,r){for(var o=[],s=Array.from(e);s.length;){var i=s.shift();if(!we(i,!1))if(i.tagName==="SLOT"){var u=i.assignedElements(),v=u.length?u:i.children,d=t(v,!0,r);r.flatten?o.push.apply(o,d):o.push({scopeParent:i,candidates:d})}else{var p=le.call(i,ye);p&&r.filter(i)&&(n||!e.includes(i))&&o.push(i);var b=i.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(i),T=!we(b,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(i));if(b&&T){var c=t(b===!0?i.children:b.children,!0,r);r.flatten?o.push.apply(o,c):o.push({scopeParent:i,candidates:c})}else s.unshift.apply(s,i.children)}}return o},ut=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},at=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||Mt(e))&&!ut(e)?0:e.tabIndex},Ft=function(e,n){var r=at(e);return r<0&&n&&!ut(e)?0:r},Ot=function(e,n){return e.tabIndex===n.tabIndex?e.documentOrder-n.documentOrder:e.tabIndex-n.tabIndex},ct=function(e){return e.tagName==="INPUT"},Lt=function(e){return ct(e)&&e.type==="hidden"},Dt=function(e){var n=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(r){return r.tagName==="SUMMARY"});return n},Nt=function(e,n){for(var r=0;r<e.length;r++)if(e[r].checked&&e[r].form===n)return e[r]},_t=function(e){if(!e.name)return!0;var n=e.form||Re(e),r=function(u){return n.querySelectorAll('input[type="radio"][name="'+u+'"]')},o;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")o=r(window.CSS.escape(e.name));else try{o=r(e.name)}catch(i){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",i.message),!1}var s=Nt(o,e.form);return!s||s===e},Kt=function(e){return ct(e)&&e.type==="radio"},Bt=function(e){return Kt(e)&&!_t(e)},Wt=function(e){var n,r=e&&Re(e),o=(n=r)===null||n===void 0?void 0:n.host,s=!1;if(r&&r!==e){var i,u,v;for(s=!!((i=o)!==null&&i!==void 0&&(u=i.ownerDocument)!==null&&u!==void 0&&u.contains(o)||e!=null&&(v=e.ownerDocument)!==null&&v!==void 0&&v.contains(e));!s&&o;){var d,p,b;r=Re(o),o=(d=r)===null||d===void 0?void 0:d.host,s=!!((p=o)!==null&&p!==void 0&&(b=p.ownerDocument)!==null&&b!==void 0&&b.contains(o))}}return s},qe=function(e){var n=e.getBoundingClientRect(),r=n.width,o=n.height;return r===0&&o===0},$t=function(e,n){var r=n.displayCheck,o=n.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=le.call(e,"details>summary:first-of-type"),i=s?e.parentElement:e;if(le.call(i,"details:not([open]) *"))return!0;if(!r||r==="full"||r==="legacy-full"){if(typeof o=="function"){for(var u=e;e;){var v=e.parentElement,d=Re(e);if(v&&!v.shadowRoot&&o(v)===!0)return qe(e);e.assignedSlot?e=e.assignedSlot:!v&&d!==e.ownerDocument?e=d.host:e=v}e=u}if(Wt(e))return!e.getClientRects().length;if(r!=="legacy-full")return!0}else if(r==="non-zero-area")return qe(e);return!1},Vt=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var n=e.parentElement;n;){if(n.tagName==="FIELDSET"&&n.disabled){for(var r=0;r<n.children.length;r++){var o=n.children.item(r);if(o.tagName==="LEGEND")return le.call(n,"fieldset[disabled] *")?!0:!o.contains(e)}return!0}n=n.parentElement}return!1},qt=function(e,n){return!(n.disabled||we(n)||Lt(n)||$t(n,e)||Dt(n)||Vt(n))},Ne=function(e,n){return!(Bt(n)||at(n)<0||!qt(e,n))},Ht=function(e){var n=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(n)||n>=0)},Ut=function t(e){var n=[],r=[];return e.forEach(function(o,s){var i=!!o.scopeParent,u=i?o.scopeParent:o,v=Ft(u,i),d=i?t(o.candidates):u;v===0?i?n.push.apply(n,d):n.push(u):r.push({documentOrder:s,tabIndex:v,item:o,isScope:i,content:d})}),r.sort(Ot).reduce(function(o,s){return s.isScope?o.push.apply(o,s.content):o.push(s.content),o},[]).concat(n)},xe=function(e,n){n=n||{};var r;return n.getShadowRoot?r=At([e],n.includeContainer,{filter:Ne.bind(null,n),flatten:!1,getShadowRoot:n.getShadowRoot,shadowRootFilter:Ht}):r=Pt(e,n.includeContainer,Ne.bind(null,n)),Ut(r)},Yt=function(e,n){if(n=n||{},!e)throw new Error("No node provided");return le.call(e,ye)===!1?!1:Ne(n,e)};function z(t){let e=t.activeElement;for(;((n=e)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;e=e.shadowRoot.activeElement}return e}function Y(t,e){if(!t||!e)return!1;const n=e.getRootNode==null?void 0:e.getRootNode();if(t.contains(e))return!0;if(n&&wt(n)){let r=e;for(;r;){if(t===r)return!0;r=r.parentNode||r.host}}return!1}function lt(){const t=navigator.userAgentData;return t!=null&&t.platform?t.platform:navigator.platform}function ft(){const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?t.brands.map(e=>{let{brand:n,version:r}=e;return n+"/"+r}).join(" "):navigator.userAgent}function jt(t){return t.mozInputSource===0&&t.isTrusted?!0:_e()&&t.pointerType?t.type==="click"&&t.buttons===1:t.detail===0&&!t.pointerType}function dt(t){return Gt()?!1:!_e()&&t.width===0&&t.height===0||_e()&&t.width===1&&t.height===1&&t.pressure===0&&t.detail===0&&t.pointerType==="mouse"||t.width<1&&t.height<1&&t.pressure===0&&t.detail===0&&t.pointerType==="touch"}function vt(){return/apple/i.test(navigator.vendor)}function _e(){const t=/android/i;return t.test(lt())||t.test(ft())}function Xt(){return lt().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function Gt(){return ft().includes("jsdom/")}function ve(t,e){const n=["mouse","pen"];return e||n.push("",void 0),n.includes(t)}function Zt(t){return"nativeEvent"in t}function Jt(t){return t.matches("html,body")}function j(t){return(t==null?void 0:t.ownerDocument)||document}function Pe(t,e){if(e==null)return!1;if("composedPath"in t)return t.composedPath().includes(e);const n=t;return n.target!=null&&e.contains(n.target)}function re(t){return"composedPath"in t?t.composedPath()[0]:t.target}const Qt="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function Be(t){return ee(t)&&t.matches(Qt)}function Ae(t){t.preventDefault(),t.stopPropagation()}function zt(t){return t?t.getAttribute("role")==="combobox"&&Be(t):!1}const mt={...Rt},en=mt.useInsertionEffect,tn=en||(t=>t());function J(t){const e=a.useRef(()=>{});return tn(()=>{e.current=t}),a.useCallback(function(){for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}var Z=typeof document<"u"?a.useLayoutEffect:a.useEffect;function me(){return me=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},me.apply(this,arguments)}let He=!1,nn=0;const Ue=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+nn++;function rn(){const[t,e]=a.useState(()=>He?Ue():void 0);return Z(()=>{t==null&&e(Ue())},[]),a.useEffect(()=>{He=!0},[]),t}const on=mt.useId,Ce=on||rn,In=a.forwardRef(function(e,n){const{context:{placement:r,elements:{floating:o},middlewareData:{arrow:s,shift:i}},width:u=14,height:v=7,tipRadius:d=0,strokeWidth:p=0,staticOffset:b,stroke:T,d:c,style:{transform:m,...l}={},...x}=e,S=Ce(),[F,g]=a.useState(!1);if(Z(()=>{if(!o)return;ot(o).direction==="rtl"&&g(!0)},[o]),!o)return null;const[I,$]=r.split("-"),D=I==="top"||I==="bottom";let B=b;(D&&i!=null&&i.x||!D&&i!=null&&i.y)&&(B=null);const L=p*2,W=L/2,H=u/2*(d/-8+1),K=v/2*d/4,w=!!c,X=B&&$==="end"?"bottom":"top";let V=B&&$==="end"?"right":"left";B&&F&&(V=$==="end"?"left":"right");const C=(s==null?void 0:s.x)!=null?B||s.x:"",N=(s==null?void 0:s.y)!=null?B||s.y:"",E=c||"M0,0"+(" H"+u)+(" L"+(u-H)+","+(v-K))+(" Q"+u/2+","+v+" "+H+","+(v-K))+" Z",y={top:w?"rotate(180deg)":"",left:w?"rotate(90deg)":"rotate(-90deg)",bottom:w?"":"rotate(180deg)",right:w?"rotate(-90deg)":"rotate(90deg)"}[I];return a.createElement("svg",me({},x,{"aria-hidden":!0,ref:n,width:w?u:u+L,height:u,viewBox:"0 0 "+u+" "+(v>u?v:u),style:{position:"absolute",pointerEvents:"none",[V]:C,[X]:N,[I]:D||w?"100%":"calc(100% - "+L/2+"px)",transform:[y,m].filter(f=>!!f).join(" "),...l}}),L>0&&a.createElement("path",{clipPath:"url(#"+S+")",fill:"none",stroke:T,strokeWidth:L+(c?0:1),d:E}),a.createElement("path",{stroke:L&&!c?x.fill:"none",d:E}),a.createElement("clipPath",{id:S},a.createElement("rect",{x:-W,y:W*(w?-1:1),width:u+L,height:u})))});function sn(){const t=new Map;return{emit(e,n){var r;(r=t.get(e))==null||r.forEach(o=>o(n))},on(e,n){t.set(e,[...t.get(e)||[],n])},off(e,n){var r;t.set(e,((r=t.get(e))==null?void 0:r.filter(o=>o!==n))||[])}}}const un=a.createContext(null),an=a.createContext(null),We=()=>{var t;return((t=a.useContext(un))==null?void 0:t.id)||null},Se=()=>a.useContext(an);function ie(t){return"data-floating-ui-"+t}function ce(t){const e=a.useRef(t);return Z(()=>{e.current=t}),e}const Ye=ie("safe-polygon");function Fe(t,e,n){return n&&!ve(n)?0:typeof t=="number"?t:t==null?void 0:t[e]}function kn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,events:s,elements:i}=t,{enabled:u=!0,delay:v=0,handleClose:d=null,mouseOnly:p=!1,restMs:b=0,move:T=!0}=e,c=Se(),m=We(),l=ce(d),x=ce(v),S=ce(n),F=a.useRef(),g=a.useRef(-1),I=a.useRef(),$=a.useRef(-1),D=a.useRef(!0),B=a.useRef(!1),L=a.useRef(()=>{}),W=a.useRef(!1),H=a.useCallback(()=>{var E;const y=(E=o.current.openEvent)==null?void 0:E.type;return(y==null?void 0:y.includes("mouse"))&&y!=="mousedown"},[o]);a.useEffect(()=>{if(!u)return;function E(y){let{open:f}=y;f||(clearTimeout(g.current),clearTimeout($.current),D.current=!0,W.current=!1)}return s.on("openchange",E),()=>{s.off("openchange",E)}},[u,s]),a.useEffect(()=>{if(!u||!l.current||!n)return;function E(f){H()&&r(!1,f,"hover")}const y=j(i.floating).documentElement;return y.addEventListener("mouseleave",E),()=>{y.removeEventListener("mouseleave",E)}},[i.floating,n,r,u,l,H]);const K=a.useCallback(function(E,y,f){y===void 0&&(y=!0),f===void 0&&(f="hover");const k=Fe(x.current,"close",F.current);k&&!I.current?(clearTimeout(g.current),g.current=window.setTimeout(()=>r(!1,E,f),k)):y&&(clearTimeout(g.current),r(!1,E,f))},[x,r]),w=J(()=>{L.current(),I.current=void 0}),X=J(()=>{if(B.current){const E=j(i.floating).body;E.style.pointerEvents="",E.removeAttribute(Ye),B.current=!1}}),V=J(()=>o.current.openEvent?["click","mousedown"].includes(o.current.openEvent.type):!1);a.useEffect(()=>{if(!u)return;function E(R){if(clearTimeout(g.current),D.current=!1,p&&!ve(F.current)||b>0&&!Fe(x.current,"open"))return;const _=Fe(x.current,"open",F.current);_?g.current=window.setTimeout(()=>{S.current||r(!0,R,"hover")},_):n||r(!0,R,"hover")}function y(R){if(V())return;L.current();const _=j(i.floating);if(clearTimeout($.current),W.current=!1,l.current&&o.current.floatingContext){n||clearTimeout(g.current),I.current=l.current({...o.current.floatingContext,tree:c,x:R.clientX,y:R.clientY,onClose(){X(),w(),V()||K(R,!0,"safe-polygon")}});const M=I.current;_.addEventListener("mousemove",M),L.current=()=>{_.removeEventListener("mousemove",M)};return}(F.current==="touch"?!Y(i.floating,R.relatedTarget):!0)&&K(R)}function f(R){V()||o.current.floatingContext&&(l.current==null||l.current({...o.current.floatingContext,tree:c,x:R.clientX,y:R.clientY,onClose(){X(),w(),V()||K(R)}})(R))}if(G(i.domReference)){var k;const R=i.domReference;return n&&R.addEventListener("mouseleave",f),(k=i.floating)==null||k.addEventListener("mouseleave",f),T&&R.addEventListener("mousemove",E,{once:!0}),R.addEventListener("mouseenter",E),R.addEventListener("mouseleave",y),()=>{var _;n&&R.removeEventListener("mouseleave",f),(_=i.floating)==null||_.removeEventListener("mouseleave",f),T&&R.removeEventListener("mousemove",E),R.removeEventListener("mouseenter",E),R.removeEventListener("mouseleave",y)}}},[i,u,t,p,b,T,K,w,X,r,n,S,c,x,l,o,V]),Z(()=>{var E;if(u&&n&&(E=l.current)!=null&&E.__options.blockPointerEvents&&H()){B.current=!0;const f=i.floating;if(G(i.domReference)&&f){var y;const k=j(i.floating).body;k.setAttribute(Ye,"");const R=i.domReference,_=c==null||(y=c.nodesRef.current.find(te=>te.id===m))==null||(y=y.context)==null?void 0:y.elements.floating;return _&&(_.style.pointerEvents=""),k.style.pointerEvents="none",R.style.pointerEvents="auto",f.style.pointerEvents="auto",()=>{k.style.pointerEvents="",R.style.pointerEvents="",f.style.pointerEvents=""}}}},[u,n,m,i,c,l,H]),Z(()=>{n||(F.current=void 0,W.current=!1,w(),X())},[n,w,X]),a.useEffect(()=>()=>{w(),clearTimeout(g.current),clearTimeout($.current),X()},[u,i.domReference,w,X]);const C=a.useMemo(()=>{function E(y){F.current=y.pointerType}return{onPointerDown:E,onPointerEnter:E,onMouseMove(y){const{nativeEvent:f}=y;function k(){!D.current&&!S.current&&r(!0,f,"hover")}p&&!ve(F.current)||n||b===0||W.current&&y.movementX**2+y.movementY**2<2||(clearTimeout($.current),F.current==="touch"?k():(W.current=!0,$.current=window.setTimeout(k,b)))}}},[p,r,n,S,b]),N=a.useMemo(()=>({onMouseEnter(){clearTimeout(g.current)},onMouseLeave(E){V()||K(E.nativeEvent,!1)}}),[K,V]);return a.useMemo(()=>u?{reference:C,floating:N}:{},[u,C,N])}let je=0;function ue(t,e){e===void 0&&(e={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:o=!1}=e;r&&cancelAnimationFrame(je);const s=()=>t==null?void 0:t.focus({preventScroll:n});o?s():je=requestAnimationFrame(s)}function cn(t,e){var n;let r=[],o=(n=t.find(s=>s.id===e))==null?void 0:n.parentId;for(;o;){const s=t.find(i=>i.id===o);o=s==null?void 0:s.parentId,s&&(r=r.concat(s))}return r}function fe(t,e){let n=t.filter(o=>{var s;return o.parentId===e&&((s=o.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=t.filter(o=>{var s;return(s=r)==null?void 0:s.some(i=>{var u;return o.parentId===i.id&&((u=o.context)==null?void 0:u.open)})}),n=n.concat(r);return n}let ae=new WeakMap,he=new WeakSet,Ee={},Oe=0;const ln=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,pt=t=>t&&(t.host||pt(t.parentNode)),fn=(t,e)=>e.map(n=>{if(t.contains(n))return n;const r=pt(n);return t.contains(r)?r:null}).filter(n=>n!=null);function dn(t,e,n,r){const o="data-floating-ui-inert",s=r?"inert":n?"aria-hidden":null,i=fn(e,t),u=new Set,v=new Set(i),d=[];Ee[o]||(Ee[o]=new WeakMap);const p=Ee[o];i.forEach(b),T(e),u.clear();function b(c){!c||u.has(c)||(u.add(c),c.parentNode&&b(c.parentNode))}function T(c){!c||v.has(c)||[].forEach.call(c.children,m=>{if(it(m)!=="script")if(u.has(m))T(m);else{const l=s?m.getAttribute(s):null,x=l!==null&&l!=="false",S=(ae.get(m)||0)+1,F=(p.get(m)||0)+1;ae.set(m,S),p.set(m,F),d.push(m),S===1&&x&&he.add(m),F===1&&m.setAttribute(o,""),!x&&s&&m.setAttribute(s,"true")}})}return Oe++,()=>{d.forEach(c=>{const m=(ae.get(c)||0)-1,l=(p.get(c)||0)-1;ae.set(c,m),p.set(c,l),m||(!he.has(c)&&s&&c.removeAttribute(s),he.delete(c)),l||c.removeAttribute(o)}),Oe--,Oe||(ae=new WeakMap,ae=new WeakMap,he=new WeakSet,Ee={})}}function Xe(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);const r=j(t[0]).body;return dn(t.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,e,n)}const pe=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function bt(t,e){const n=xe(t,pe());e==="prev"&&n.reverse();const r=n.indexOf(z(j(t)));return n.slice(r+1)[0]}function gt(){return bt(document.body,"next")}function ht(){return bt(document.body,"prev")}function de(t,e){const n=e||t.currentTarget,r=t.relatedTarget;return!r||!Y(n,r)}function vn(t){xe(t,pe()).forEach(n=>{n.dataset.tabindex=n.getAttribute("tabindex")||"",n.setAttribute("tabindex","-1")})}function Ge(t){t.querySelectorAll("[data-tabindex]").forEach(n=>{const r=n.dataset.tabindex;delete n.dataset.tabindex,r?n.setAttribute("tabindex",r):n.removeAttribute("tabindex")})}const Ie={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let mn;function Ze(t){t.key==="Tab"&&(t.target,clearTimeout(mn))}const Te=a.forwardRef(function(e,n){const[r,o]=a.useState();Z(()=>(vt()&&o("button"),document.addEventListener("keydown",Ze),()=>{document.removeEventListener("keydown",Ze)}),[]);const s={ref:n,tabIndex:0,role:r,"aria-hidden":r?void 0:!0,[ie("focus-guard")]:"",style:Ie};return a.createElement("span",me({},e,s))}),Et=a.createContext(null),Je=ie("portal");function pn(t){t===void 0&&(t={});const{id:e,root:n}=t,r=Ce(),o=yt(),[s,i]=a.useState(null),u=a.useRef(null);return Z(()=>()=>{s==null||s.remove(),queueMicrotask(()=>{u.current=null})},[s]),Z(()=>{if(!r||u.current)return;const v=e?document.getElementById(e):null;if(!v)return;const d=document.createElement("div");d.id=r,d.setAttribute(Je,""),v.appendChild(d),u.current=d,i(d)},[e,r]),Z(()=>{if(n===null||!r||u.current)return;let v=n||(o==null?void 0:o.portalNode);v&&!G(v)&&(v=v.current),v=v||document.body;let d=null;e&&(d=document.createElement("div"),d.id=e,v.appendChild(d));const p=document.createElement("div");p.id=r,p.setAttribute(Je,""),v=d||v,v.appendChild(p),u.current=p,i(p)},[e,n,r,o]),s}function Mn(t){const{children:e,id:n,root:r,preserveTabOrder:o=!0}=t,s=pn({id:n,root:r}),[i,u]=a.useState(null),v=a.useRef(null),d=a.useRef(null),p=a.useRef(null),b=a.useRef(null),T=i==null?void 0:i.modal,c=i==null?void 0:i.open,m=!!i&&!i.modal&&i.open&&o&&!!(r||s);return a.useEffect(()=>{if(!s||!o||T)return;function l(x){s&&de(x)&&(x.type==="focusin"?Ge:vn)(s)}return s.addEventListener("focusin",l,!0),s.addEventListener("focusout",l,!0),()=>{s.removeEventListener("focusin",l,!0),s.removeEventListener("focusout",l,!0)}},[s,o,T]),a.useEffect(()=>{s&&(c||Ge(s))},[c,s]),a.createElement(Et.Provider,{value:a.useMemo(()=>({preserveTabOrder:o,beforeOutsideRef:v,afterOutsideRef:d,beforeInsideRef:p,afterInsideRef:b,portalNode:s,setFocusManagerState:u}),[o,s])},m&&s&&a.createElement(Te,{"data-type":"outside",ref:v,onFocus:l=>{if(de(l,s)){var x;(x=p.current)==null||x.focus()}else{const S=ht()||(i==null?void 0:i.refs.domReference.current);S==null||S.focus()}}}),m&&s&&a.createElement("span",{"aria-owns":s.id,style:Ie}),s&&St.createPortal(e,s),m&&s&&a.createElement(Te,{"data-type":"outside",ref:d,onFocus:l=>{if(de(l,s)){var x;(x=b.current)==null||x.focus()}else{const S=gt()||(i==null?void 0:i.refs.domReference.current);S==null||S.focus(),i!=null&&i.closeOnFocusOut&&(i==null||i.onOpenChange(!1,l.nativeEvent,"focus-out"))}}}))}const yt=()=>a.useContext(Et),Ke="data-floating-ui-focusable";function bn(t){return t?t.hasAttribute(Ke)?t:t.querySelector("["+Ke+"]")||t:null}const gn=20;let oe=[];function Le(t){oe=oe.filter(n=>n.isConnected);let e=t;if(!(!e||it(e)==="body")){if(!Yt(e,pe())){const n=xe(e,pe())[0];n&&(e=n)}oe.push(e),oe.length>gn&&(oe=oe.slice(-20))}}function Qe(){return oe.slice().reverse().find(t=>t.isConnected)}const hn=a.forwardRef(function(e,n){return a.createElement("button",me({},e,{type:"button",ref:n,tabIndex:-1,style:Ie}))});function Pn(t){const{context:e,children:n,disabled:r=!1,order:o=["content"],guards:s=!0,initialFocus:i=0,returnFocus:u=!0,restoreFocus:v=!1,modal:d=!0,visuallyHiddenDismiss:p=!1,closeOnFocusOut:b=!0}=t,{open:T,refs:c,nodeId:m,onOpenChange:l,events:x,dataRef:S,floatingId:F,elements:{domReference:g,floating:I}}=e,$=typeof i=="number"&&i<0,D=zt(g)&&$,B=ln()?s:!0,L=ce(o),W=ce(i),H=ce(u),K=Se(),w=yt(),X=a.useRef(null),V=a.useRef(null),C=a.useRef(!1),N=a.useRef(!1),E=a.useRef(-1),y=w!=null,f=bn(I),k=J(function(M){return M===void 0&&(M=f),M?xe(M,pe()):[]}),R=J(M=>{const A=k(M);return L.current.map(h=>g&&h==="reference"?g:f&&h==="floating"?f:A).filter(Boolean).flat()});a.useEffect(()=>{if(r||!d)return;function M(h){if(h.key==="Tab"){Y(f,z(j(f)))&&k().length===0&&!D&&Ae(h);const P=R(),O=re(h);L.current[0]==="reference"&&O===g&&(Ae(h),h.shiftKey?ue(P[P.length-1]):ue(P[1])),L.current[1]==="floating"&&O===f&&h.shiftKey&&(Ae(h),ue(P[0]))}}const A=j(f);return A.addEventListener("keydown",M),()=>{A.removeEventListener("keydown",M)}},[r,g,f,d,L,D,k,R]),a.useEffect(()=>{if(r||!I)return;function M(A){const h=re(A),O=k().indexOf(h);O!==-1&&(E.current=O)}return I.addEventListener("focusin",M),()=>{I.removeEventListener("focusin",M)}},[r,I,k]),a.useEffect(()=>{if(r||!b)return;function M(){N.current=!0,setTimeout(()=>{N.current=!1})}function A(h){const P=h.relatedTarget;queueMicrotask(()=>{const O=!(Y(g,P)||Y(I,P)||Y(P,I)||Y(w==null?void 0:w.portalNode,P)||P!=null&&P.hasAttribute(ie("focus-guard"))||K&&(fe(K.nodesRef.current,m).find(U=>{var q,Q;return Y((q=U.context)==null?void 0:q.elements.floating,P)||Y((Q=U.context)==null?void 0:Q.elements.domReference,P)})||cn(K.nodesRef.current,m).find(U=>{var q,Q;return((q=U.context)==null?void 0:q.elements.floating)===P||((Q=U.context)==null?void 0:Q.elements.domReference)===P})));if(v&&O&&z(j(f))===j(f).body){ee(f)&&f.focus();const U=E.current,q=k(),Q=q[U]||q[q.length-1]||f;ee(Q)&&Q.focus()}(D||!d)&&P&&O&&!N.current&&P!==Qe()&&(C.current=!0,l(!1,h,"focus-out"))})}if(I&&ee(g))return g.addEventListener("focusout",A),g.addEventListener("pointerdown",M),I.addEventListener("focusout",A),()=>{g.removeEventListener("focusout",A),g.removeEventListener("pointerdown",M),I.removeEventListener("focusout",A)}},[r,g,I,f,d,m,K,w,l,b,v,k,D]),a.useEffect(()=>{var M;if(r)return;const A=Array.from((w==null||(M=w.portalNode)==null?void 0:M.querySelectorAll("["+ie("portal")+"]"))||[]);if(I){const h=[I,...A,X.current,V.current,L.current.includes("reference")||D?g:null].filter(O=>O!=null),P=d||D?Xe(h,B,!B):Xe(h);return()=>{P()}}},[r,g,I,d,L,w,D,B]),Z(()=>{if(r||!ee(f))return;const M=j(f),A=z(M);queueMicrotask(()=>{const h=R(f),P=W.current,O=(typeof P=="number"?h[P]:P.current)||f,U=Y(f,A);!$&&!U&&T&&ue(O,{preventScroll:O===f})})},[r,T,f,$,R,W]),Z(()=>{if(r||!f)return;let M=!1;const A=j(f),h=z(A);let O=S.current.openEvent;Le(h);function U(se){let{open:be,reason:ge,event:ne,nested:ke}=se;be&&(O=ne),ge==="escape-key"&&c.domReference.current&&Le(c.domReference.current),ge==="hover"&&ne.type==="mouseleave"&&(C.current=!0),ge==="outside-press"&&(ke?(C.current=!1,M=!0):C.current=!(jt(ne)||dt(ne)))}x.on("openchange",U);const q=A.createElement("span");q.setAttribute("tabindex","-1"),q.setAttribute("aria-hidden","true"),Object.assign(q.style,Ie),y&&g&&g.insertAdjacentElement("afterend",q);function Q(){return typeof H.current=="boolean"?Qe()||q:H.current.current||q}return()=>{x.off("openchange",U);const se=z(A),be=Y(I,se)||K&&fe(K.nodesRef.current,m).some(ke=>{var $e;return Y(($e=ke.context)==null?void 0:$e.elements.floating,se)});(be||O&&["click","mousedown"].includes(O.type))&&c.domReference.current&&Le(c.domReference.current);const ne=Q();queueMicrotask(()=>{H.current&&!C.current&&ee(ne)&&(!(ne!==se&&se!==A.body)||be)&&ne.focus({preventScroll:M}),q.remove()})}},[r,I,f,H,S,c,x,K,m,y,g]),a.useEffect(()=>{queueMicrotask(()=>{C.current=!1})},[r]),Z(()=>{if(!r&&w)return w.setFocusManagerState({modal:d,closeOnFocusOut:b,open:T,onOpenChange:l,refs:c}),()=>{w.setFocusManagerState(null)}},[r,w,d,T,l,c,b]),Z(()=>{if(r||!f||typeof MutationObserver!="function"||$)return;const M=()=>{const h=f.getAttribute("tabindex"),P=k(),O=z(j(I)),U=P.indexOf(O);U!==-1&&(E.current=U),L.current.includes("floating")||O!==c.domReference.current&&P.length===0?h!=="0"&&f.setAttribute("tabindex","0"):h!=="-1"&&f.setAttribute("tabindex","-1")};M();const A=new MutationObserver(M);return A.observe(f,{childList:!0,subtree:!0,attributes:!0}),()=>{A.disconnect()}},[r,I,f,c,L,k,$]);function _(M){return r||!p||!d?null:a.createElement(hn,{ref:M==="start"?X:V,onClick:A=>l(!1,A.nativeEvent)},typeof p=="string"?p:"Dismiss")}const te=!r&&B&&(d?!D:!0)&&(y||d);return a.createElement(a.Fragment,null,te&&a.createElement(Te,{"data-type":"inside",ref:w==null?void 0:w.beforeInsideRef,onFocus:M=>{if(d){const h=R();ue(o[0]==="reference"?h[0]:h[h.length-1])}else if(w!=null&&w.preserveTabOrder&&w.portalNode)if(C.current=!1,de(M,w.portalNode)){const h=gt()||g;h==null||h.focus()}else{var A;(A=w.beforeOutsideRef.current)==null||A.focus()}}}),!D&&_("start"),n,_("end"),te&&a.createElement(Te,{"data-type":"inside",ref:w==null?void 0:w.afterInsideRef,onFocus:M=>{if(d)ue(R()[0]);else if(w!=null&&w.preserveTabOrder&&w.portalNode)if(b&&(C.current=!0),de(M,w.portalNode)){const h=ht()||g;h==null||h.focus()}else{var A;(A=w.afterOutsideRef.current)==null||A.focus()}}}))}function ze(t){return ee(t.target)&&t.target.tagName==="BUTTON"}function et(t){return Be(t)}function An(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,dataRef:o,elements:{domReference:s}}=t,{enabled:i=!0,event:u="click",toggle:v=!0,ignoreMouse:d=!1,keyboardHandlers:p=!0,stickIfOpen:b=!0}=e,T=a.useRef(),c=a.useRef(!1),m=a.useMemo(()=>({onPointerDown(l){T.current=l.pointerType},onMouseDown(l){const x=T.current;l.button===0&&u!=="click"&&(ve(x,!0)&&d||(n&&v&&(!(o.current.openEvent&&b)||o.current.openEvent.type==="mousedown")?r(!1,l.nativeEvent,"click"):(l.preventDefault(),r(!0,l.nativeEvent,"click"))))},onClick(l){const x=T.current;if(u==="mousedown"&&T.current){T.current=void 0;return}ve(x,!0)&&d||(n&&v&&(!(o.current.openEvent&&b)||o.current.openEvent.type==="click")?r(!1,l.nativeEvent,"click"):r(!0,l.nativeEvent,"click"))},onKeyDown(l){T.current=void 0,!(l.defaultPrevented||!p||ze(l))&&(l.key===" "&&!et(s)&&(l.preventDefault(),c.current=!0),l.key==="Enter"&&r(!(n&&v),l.nativeEvent,"click"))},onKeyUp(l){l.defaultPrevented||!p||ze(l)||et(s)||l.key===" "&&c.current&&(c.current=!1,r(!(n&&v),l.nativeEvent,"click"))}}),[o,s,u,d,p,r,n,b,v]);return a.useMemo(()=>i?{reference:m}:{},[i,m])}const En={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},yn={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},tt=t=>{var e,n;return{escapeKey:typeof t=="boolean"?t:(e=t==null?void 0:t.escapeKey)!=null?e:!1,outsidePress:typeof t=="boolean"?t:(n=t==null?void 0:t.outsidePress)!=null?n:!0}};function Fn(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,elements:o,dataRef:s}=t,{enabled:i=!0,escapeKey:u=!0,outsidePress:v=!0,outsidePressEvent:d="pointerdown",referencePress:p=!1,referencePressEvent:b="pointerdown",ancestorScroll:T=!1,bubbles:c,capture:m}=e,l=Se(),x=J(typeof v=="function"?v:()=>!1),S=typeof v=="function"?x:v,F=a.useRef(!1),g=a.useRef(!1),{escapeKey:I,outsidePress:$}=tt(c),{escapeKey:D,outsidePress:B}=tt(m),L=a.useRef(!1),W=J(C=>{var N;if(!n||!i||!u||C.key!=="Escape"||L.current)return;const E=(N=s.current.floatingContext)==null?void 0:N.nodeId,y=l?fe(l.nodesRef.current,E):[];if(!I&&(C.stopPropagation(),y.length>0)){let f=!0;if(y.forEach(k=>{var R;if((R=k.context)!=null&&R.open&&!k.context.dataRef.current.__escapeKeyBubbles){f=!1;return}}),!f)return}r(!1,Zt(C)?C.nativeEvent:C,"escape-key")}),H=J(C=>{var N;const E=()=>{var y;W(C),(y=re(C))==null||y.removeEventListener("keydown",E)};(N=re(C))==null||N.addEventListener("keydown",E)}),K=J(C=>{var N;const E=F.current;F.current=!1;const y=g.current;if(g.current=!1,d==="click"&&y||E||typeof S=="function"&&!S(C))return;const f=re(C),k="["+ie("inert")+"]",R=j(o.floating).querySelectorAll(k);let _=G(f)?f:null;for(;_&&!Ve(_);){const h=Ct(_);if(Ve(h)||!G(h))break;_=h}if(R.length&&G(f)&&!Jt(f)&&!Y(f,o.floating)&&Array.from(R).every(h=>!Y(_,h)))return;if(ee(f)&&V){const h=f.clientWidth>0&&f.scrollWidth>f.clientWidth,P=f.clientHeight>0&&f.scrollHeight>f.clientHeight;let O=P&&C.offsetX>f.clientWidth;if(P&&ot(f).direction==="rtl"&&(O=C.offsetX<=f.offsetWidth-f.clientWidth),O||h&&C.offsetY>f.clientHeight)return}const te=(N=s.current.floatingContext)==null?void 0:N.nodeId,M=l&&fe(l.nodesRef.current,te).some(h=>{var P;return Pe(C,(P=h.context)==null?void 0:P.elements.floating)});if(Pe(C,o.floating)||Pe(C,o.domReference)||M)return;const A=l?fe(l.nodesRef.current,te):[];if(A.length>0){let h=!0;if(A.forEach(P=>{var O;if((O=P.context)!=null&&O.open&&!P.context.dataRef.current.__outsidePressBubbles){h=!1;return}}),!h)return}r(!1,C,"outside-press")}),w=J(C=>{var N;const E=()=>{var y;K(C),(y=re(C))==null||y.removeEventListener(d,E)};(N=re(C))==null||N.addEventListener(d,E)});a.useEffect(()=>{if(!n||!i)return;s.current.__escapeKeyBubbles=I,s.current.__outsidePressBubbles=$;let C=-1;function N(R){r(!1,R,"ancestor-scroll")}function E(){window.clearTimeout(C),L.current=!0}function y(){C=window.setTimeout(()=>{L.current=!1},xt()?5:0)}const f=j(o.floating);u&&(f.addEventListener("keydown",D?H:W,D),f.addEventListener("compositionstart",E),f.addEventListener("compositionend",y)),S&&f.addEventListener(d,B?w:K,B);let k=[];return T&&(G(o.domReference)&&(k=Me(o.domReference)),G(o.floating)&&(k=k.concat(Me(o.floating))),!G(o.reference)&&o.reference&&o.reference.contextElement&&(k=k.concat(Me(o.reference.contextElement)))),k=k.filter(R=>{var _;return R!==((_=f.defaultView)==null?void 0:_.visualViewport)}),k.forEach(R=>{R.addEventListener("scroll",N,{passive:!0})}),()=>{u&&(f.removeEventListener("keydown",D?H:W,D),f.removeEventListener("compositionstart",E),f.removeEventListener("compositionend",y)),S&&f.removeEventListener(d,B?w:K,B),k.forEach(R=>{R.removeEventListener("scroll",N)}),window.clearTimeout(C)}},[s,o,u,S,d,n,r,T,i,I,$,W,D,H,K,B,w]),a.useEffect(()=>{F.current=!1},[S,d]);const X=a.useMemo(()=>({onKeyDown:W,[En[b]]:C=>{p&&r(!1,C.nativeEvent,"reference-press")}}),[W,r,p,b]),V=a.useMemo(()=>({onKeyDown:W,onMouseDown(){g.current=!0},onMouseUp(){g.current=!0},[yn[d]]:()=>{F.current=!0}}),[W,d]);return a.useMemo(()=>i?{reference:X,floating:V}:{},[i,X,V])}function Rn(t){const{open:e=!1,onOpenChange:n,elements:r}=t,o=Ce(),s=a.useRef({}),[i]=a.useState(()=>sn()),u=We()!=null,[v,d]=a.useState(r.reference),p=J((c,m,l)=>{s.current.openEvent=c?m:void 0,i.emit("openchange",{open:c,event:m,reason:l,nested:u}),n==null||n(c,m,l)}),b=a.useMemo(()=>({setPositionReference:d}),[]),T=a.useMemo(()=>({reference:v||r.reference||null,floating:r.floating||null,domReference:r.reference}),[v,r.reference,r.floating]);return a.useMemo(()=>({dataRef:s,open:e,onOpenChange:p,elements:T,events:i,floatingId:o,refs:b}),[e,p,T,i,o,b])}function On(t){t===void 0&&(t={});const{nodeId:e}=t,n=Rn({...t,elements:{reference:null,floating:null,...t.elements}}),r=t.rootContext||n,o=r.elements,[s,i]=a.useState(null),[u,v]=a.useState(null),p=(o==null?void 0:o.domReference)||s,b=a.useRef(null),T=Se();Z(()=>{p&&(b.current=p)},[p]);const c=It({...t,elements:{...o,...u&&{reference:u}}}),m=a.useCallback(g=>{const I=G(g)?{getBoundingClientRect:()=>g.getBoundingClientRect(),contextElement:g}:g;v(I),c.refs.setReference(I)},[c.refs]),l=a.useCallback(g=>{(G(g)||g===null)&&(b.current=g,i(g)),(G(c.refs.reference.current)||c.refs.reference.current===null||g!==null&&!G(g))&&c.refs.setReference(g)},[c.refs]),x=a.useMemo(()=>({...c.refs,setReference:l,setPositionReference:m,domReference:b}),[c.refs,l,m]),S=a.useMemo(()=>({...c.elements,domReference:p}),[c.elements,p]),F=a.useMemo(()=>({...c,...r,refs:x,elements:S,nodeId:e}),[c,x,S,e,r]);return Z(()=>{r.dataRef.current.floatingContext=F;const g=T==null?void 0:T.nodesRef.current.find(I=>I.id===e);g&&(g.context=F)}),a.useMemo(()=>({...c,context:F,refs:x,elements:S}),[c,x,S,F])}function Ln(t,e){e===void 0&&(e={});const{open:n,onOpenChange:r,events:o,dataRef:s,elements:i}=t,{enabled:u=!0,visibleOnly:v=!0}=e,d=a.useRef(!1),p=a.useRef(),b=a.useRef(!0);a.useEffect(()=>{if(!u)return;const c=Tt(i.domReference);function m(){!n&&ee(i.domReference)&&i.domReference===z(j(i.domReference))&&(d.current=!0)}function l(){b.current=!0}return c.addEventListener("blur",m),c.addEventListener("keydown",l,!0),()=>{c.removeEventListener("blur",m),c.removeEventListener("keydown",l,!0)}},[i.domReference,n,u]),a.useEffect(()=>{if(!u)return;function c(m){let{reason:l}=m;(l==="reference-press"||l==="escape-key")&&(d.current=!0)}return o.on("openchange",c),()=>{o.off("openchange",c)}},[o,u]),a.useEffect(()=>()=>{clearTimeout(p.current)},[]);const T=a.useMemo(()=>({onPointerDown(c){dt(c.nativeEvent)||(b.current=!1)},onMouseLeave(){d.current=!1},onFocus(c){if(d.current)return;const m=re(c.nativeEvent);if(v&&G(m))try{if(vt()&&Xt())throw Error();if(!m.matches(":focus-visible"))return}catch{if(!b.current&&!Be(m))return}r(!0,c.nativeEvent,"focus")},onBlur(c){d.current=!1;const m=c.relatedTarget,l=c.nativeEvent,x=G(m)&&m.hasAttribute(ie("focus-guard"))&&m.getAttribute("data-type")==="outside";p.current=window.setTimeout(()=>{var S;const F=z(i.domReference?i.domReference.ownerDocument:document);!m&&F===i.domReference||Y((S=s.current.floatingContext)==null?void 0:S.refs.floating.current,F)||Y(i.domReference,F)||x||r(!1,l,"focus")})}}),[s,i.domReference,r,v]);return a.useMemo(()=>u?{reference:T}:{},[u,T])}const nt="active",rt="selected";function De(t,e,n){const r=new Map,o=n==="item";let s=t;if(o&&t){const{[nt]:i,[rt]:u,...v}=t;s=v}return{...n==="floating"&&{tabIndex:-1,[Ke]:""},...s,...e.map(i=>{const u=i?i[n]:null;return typeof u=="function"?t?u(t):null:u}).concat(t).reduce((i,u)=>(u&&Object.entries(u).forEach(v=>{let[d,p]=v;if(!(o&&[nt,rt].includes(d)))if(d.indexOf("on")===0){if(r.has(d)||r.set(d,[]),typeof p=="function"){var b;(b=r.get(d))==null||b.push(p),i[d]=function(){for(var T,c=arguments.length,m=new Array(c),l=0;l<c;l++)m[l]=arguments[l];return(T=r.get(d))==null?void 0:T.map(x=>x(...m)).find(x=>x!==void 0)}}}else i[d]=p}),i),{})}}function Dn(t){t===void 0&&(t=[]);const e=t.map(u=>u==null?void 0:u.reference),n=t.map(u=>u==null?void 0:u.floating),r=t.map(u=>u==null?void 0:u.item),o=a.useCallback(u=>De(u,t,"reference"),e),s=a.useCallback(u=>De(u,t,"floating"),n),i=a.useCallback(u=>De(u,t,"item"),r);return a.useMemo(()=>({getReferenceProps:o,getFloatingProps:s,getItemProps:i}),[o,s,i])}const wn=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function Nn(t,e){var n;e===void 0&&(e={});const{open:r,floatingId:o}=t,{enabled:s=!0,role:i="dialog"}=e,u=(n=wn.get(i))!=null?n:i,v=Ce(),p=We()!=null,b=a.useMemo(()=>u==="tooltip"||i==="label"?{["aria-"+(i==="label"?"labelledby":"describedby")]:r?o:void 0}:{"aria-expanded":r?"true":"false","aria-haspopup":u==="alertdialog"?"dialog":u,"aria-controls":r?o:void 0,...u==="listbox"&&{role:"combobox"},...u==="menu"&&{id:v},...u==="menu"&&p&&{role:"menuitem"},...i==="select"&&{"aria-autocomplete":"none"},...i==="combobox"&&{"aria-autocomplete":"list"}},[u,o,p,r,v,i]),T=a.useMemo(()=>{const m={id:o,...u&&{role:u}};return u==="tooltip"||i==="label"?m:{...m,...u==="menu"&&{"aria-labelledby":v}}},[u,o,v,i]),c=a.useCallback(m=>{let{active:l,selected:x}=m;const S={role:"option",...l&&{id:o+"-option"}};switch(i){case"select":return{...S,"aria-selected":l&&x};case"combobox":return{...S,...l&&{"aria-selected":!0}}}return{}},[o,i]);return a.useMemo(()=>s?{reference:b,floating:T,item:c}:{},[s,b,T,c])}export{Pn as F,An as a,Fn as b,Nn as c,Dn as d,Ce as e,kn as f,Ln as g,Mn as h,In as i,On as u};
