import{j as f}from"./jsx-runtime-DQ32znRX.js";import{r as n}from"./index-DH5ua8nC.js";import{r as k}from"./index-D9uilScg.js";function b(e){n.useEffect(()=>{e?(document.body.style.overflow="hidden",document.body.style.paddingRight="0"):(document.body.style.overflow="unset",document.body.style.paddingRight="unset")},[e])}function w(e){const[r,c]=n.useState(!1);return n.useEffect(()=>{const i=document.querySelector(`#${e}`);i&&i.remove();const o=document.createElement("div");o.id=e,o.className="d-portal",document.body.appendChild(o),c(!0)},[e]),{created:r}}function E(e=[]){const[r,c]=n.useState(e),i=n.useCallback(a=>c(v=>[...v,a]),[]),o=n.useCallback(()=>c(a=>a.slice(0,a.length-1)),[]),d=n.useCallback(()=>r.at(-1),[r]),u=n.useCallback(()=>c([]),[]),s=n.useCallback(()=>r.length===0,[r.length]),h=n.useMemo(()=>({clear:u,isEmpty:s,length:r.length,peek:d,pop:o,push:i}),[u,s,r.length,d,o,i]);return[r,h]}const C=n.createContext(void 0);function x({portalName:e,children:r,availablePortals:c}){const{created:i}=w(e),[o,{push:d,pop:u,isEmpty:s}]=E([]);b(!!o.length);const h=n.useCallback((t,l)=>{if(!c)throw new Error(`there is no component for portal ${t.toString()}`);const p=c[t];if(!p)throw new Error(`there is no component for portal ${t.toString()}`);d({name:t,Component:p,payload:l})},[c,d]),a=n.useCallback(()=>{s()||u()},[s,u]),v=n.useMemo(()=>({stack:o,openPortal:h,closePortal:a}),[o,h,a]),y=n.useCallback(t=>{if(t instanceof HTMLDivElement){if(t.classList.contains("portal")&&!("bsBackdrop"in t.dataset)){a();return}if(t.classList.contains("backdrop")){const l=t.nextElementSibling;l&&l.classList.contains("portal")&&!("bsBackdrop"in l.dataset)&&a()}}},[a]);return n.useEffect(()=>{const t=l=>{if(l.key==="Escape"){const p=document.querySelector(`#${e} > div > div:last-child`);p&&y(p)}};return o.length!==0&&window.addEventListener("keydown",t),()=>{window.removeEventListener("keydown",t)}},[y,e,o.length]),f.jsxs(C.Provider,{value:v,children:[r,i&&k.createPortal(f.jsx("div",{onClick:({target:t})=>y(t),onKeyDown:()=>{},children:o.map(({Component:t,name:l,payload:p})=>f.jsxs(n.Fragment,{children:[f.jsx("div",{className:"backdrop fade show"}),f.jsx(t,{name:l,payload:p})]},l))}),document.getElementById(e))]})}function S(){const e=n.useContext(C);if(e===void 0)throw new Error("usePortalContext was used outside of PortalContextProvider");return e}try{x.displayName="DPortalContextProvider",x.__docgenInfo={description:"",displayName:"DPortalContextProvider",props:{portalName:{defaultValue:null,description:"",name:"portalName",required:!0,type:{name:"string"}},availablePortals:{defaultValue:null,description:"",name:"availablePortals",required:!1,type:{name:"PortalAvailableList<T> | undefined"}}}}}catch{}const m={language:"en",currency:{symbol:"$",precision:2,separator:",",decimal:"."},icon:{familyClass:"bi",familyPrefix:"bi-",materialStyle:!1},iconMap:{x:"x",xLg:"x-lg",chevronUp:"chevron-up",chevronDown:"chevron-down",chevronLeft:"chevron-left",chevronRight:"chevron-right",upload:"cloud-upload",calendar:"calendar",check:"check",alert:{warning:"exclamation-circle",danger:"exclamation-triangle",success:"check-circle",info:"info-circle",dark:"info-circle",light:"info-circle",primary:"info-circle",secondary:"info-circle"},input:{invalid:"exclamation-circle",valid:"check",search:"search",show:"eye",hide:"eye-slash",increase:"plus-square",decrease:"dash-square"}},setContext:()=>{},portalName:"d-portal"},P=n.createContext(m);function g({language:e=m.language,currency:r=m.currency,icon:c=m.icon,iconMap:i=m.iconMap,portalName:o=m.portalName,availablePortals:d,children:u}){const[s,h]=n.useState({language:e,currency:r,icon:c,iconMap:i}),a=n.useCallback(y=>h(t=>({...t,...y})),[]),v=n.useMemo(()=>({...s,setContext:a}),[s,a]);return f.jsx(P.Provider,{value:v,children:f.jsx(x,{portalName:o,availablePortals:d,children:u})})}function L(){const e=n.useContext(P);if(e===void 0)throw new Error("useDContext was used outside of DContextProvider");return e}try{g.displayName="DContextProvider",g.__docgenInfo={description:"",displayName:"DContextProvider",props:{language:{defaultValue:{value:"en"},description:"",name:"language",required:!1,type:{name:"string | undefined"}},currency:{defaultValue:{value:`{
    symbol: '$',
    precision: 2,
    separator: ',',
    decimal: '.',
  }`},description:"",name:"currency",required:!1,type:{name:"CurrencyProps | undefined"}},icon:{defaultValue:{value:`{
    familyClass: 'bi',
    familyPrefix: 'bi-',
    materialStyle: false,
  }`},description:"",name:"icon",required:!1,type:{name:"IconProps | undefined"}},iconMap:{defaultValue:{value:`{
    x: 'x',
    xLg: 'x-lg',
    chevronUp: 'chevron-up',
    chevronDown: 'chevron-down',
    chevronLeft: 'chevron-left',
    chevronRight: 'chevron-right',
    upload: 'cloud-upload',
    calendar: 'calendar',
    check: 'check',
    alert: {
      warning: 'exclamation-circle',
      danger: 'exclamation-triangle',
      success: 'check-circle',
      info: 'info-circle',
      dark: 'info-circle',
      light: 'info-circle',
      primary: 'info-circle',
      secondary: 'info-circle',
    },
    input: {
      invalid: 'exclamation-circle',
      valid: 'check',
      search: 'search',
      show: 'eye',
      hide: 'eye-slash',
      increase: 'plus-square',
      decrease: 'dash-square',
    },
  }`},description:"",name:"iconMap",required:!1,type:{name:"IconMapProps | undefined"}},portalName:{defaultValue:{value:"d-portal"},description:"",name:"portalName",required:!1,type:{name:"string | undefined"}},availablePortals:{defaultValue:null,description:"",name:"availablePortals",required:!1,type:{name:"PortalAvailableList<T> | undefined"}}}}}catch{}export{g as D,S as a,L as u};
