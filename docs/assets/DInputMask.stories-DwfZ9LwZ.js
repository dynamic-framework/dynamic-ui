import{j as ge}from"./jsx-runtime-DQ32znRX.js";import{r as T}from"./index-DH5ua8nC.js";import{r as oe}from"./index-D9uilScg.js";import{F as Se}from"./DInput-CpmK98WL.js";import{I as G}from"./constants-DhWTmuJQ.js";function Ie(n,e,a){return e=U(e),function(c,l){if(l&&(typeof l=="object"||typeof l=="function"))return l;if(l!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(c)}(n,ae()?Reflect.construct(e,a||[],U(n).constructor):e.apply(n,a))}function ae(){try{var n=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ae=function(){return!!n})()}function ne(n){return ne=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ne(n)}function we(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function Ee(n,e,a){return Object.defineProperty(n,"prototype",{writable:!1}),n}function Ve(n,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,writable:!0,configurable:!0}}),Object.defineProperty(n,"prototype",{writable:!1}),e&&J(n,e)}function U(n){return U=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},U(n)}function J(n,e){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,c){return a.__proto__=c,a},J(n,e)}function te(n){var e=typeof Map=="function"?new Map:void 0;return te=function(a){if(a===null||!function(l){try{return Function.toString.call(l).indexOf("[native code]")!==-1}catch{return typeof l=="function"}}(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(e!==void 0){if(e.has(a))return e.get(a);e.set(a,c)}function c(){return function(l,t,d){if(ae())return Reflect.construct.apply(null,arguments);var r=[null];r.push.apply(r,t);var u=new(l.bind.apply(l,r));return d&&J(u,d.prototype),u}(a,arguments,U(this).constructor)}return c.prototype=Object.create(a.prototype,{constructor:{value:c,enumerable:!1,writable:!0,configurable:!0}}),J(c,a)},te(n)}var H=function(n){function e(a,c){var l;return we(this,e),(l=Ie(this,e,[a])).name="SyntheticChangeError",l.cause=c,l}return Ve(e,n),Ee(e)}(te(Error));function xe(n,e){return T.useCallback(function(a){n.current=a,typeof e=="function"?e(a):ne(e)==="object"&&e!==null&&(e.current=a)},[n,e])}function Q(n,e){var a=e.value,c=e.selectionStart,l=e.selectionEnd;a!==void 0&&(n.value=a),c!==void 0&&l!==void 0&&n.setSelectionRange(c,l)}var Te=["text","email","tel","search","url"];function Me(n){var e=n.init,a=n.tracking,c=n.eventType,l=n.eventHandler,t=T.useRef({timeoutId:-1,fallbackTimeoutId:-1,cachedTimeoutId:-1,start:0,end:0}),d=T.useRef(!0),r=T.useRef(null),u=T.useRef({init:e,tracking:a,eventType:c,eventHandler:l});return u.current.init=e,u.current.tracking=a,u.current.eventType=c,u.current.eventHandler=l,T.useMemo(function(){return function(o,i,f){var p=f.onFocus,m=f.onBlur,k=f.onInput;return new Proxy(o,{set:function(E,b,s){if(b!=="current")return!1;var O=s!==null&&Te.includes(s.type);if(s!==o.current&&(o.current!==null&&(o.current.removeEventListener("focus",p),o.current.removeEventListener("blur",m),o.current.removeEventListener("input",k)),s!==null&&O)){var y,v=(y=s._wrapperState)!==null&&y!==void 0?y:{},M=v.controlled,S=M!==void 0&&M,V=v.initialValue,h=V===void 0?"":V,_=i({controlled:S,initialValue:s.value||h});Q(s,{value:_.value}),document.activeElement===s&&p(),s.addEventListener("focus",p),s.addEventListener("blur",m),s.addEventListener("input",k)}return E[b]=s,!0}})}(r,u.current.init,{onFocus:function(){t.current.timeoutId=window.setTimeout(function o(){var i,f,p,m;d.current?(t.current.start=(i=(f=r.current)===null||f===void 0?void 0:f.selectionStart)!==null&&i!==void 0?i:0,t.current.end=(p=(m=r.current)===null||m===void 0?void 0:m.selectionEnd)!==null&&p!==void 0?p:0,t.current.timeoutId=window.setTimeout(o)):t.current.fallbackTimeoutId=window.setTimeout(o)})},onBlur:function(){window.clearTimeout(t.current.timeoutId),window.clearTimeout(t.current.fallbackTimeoutId),t.current.timeoutId=-1,t.current.fallbackTimeoutId=-1,t.current.cachedTimeoutId=-1},onInput:function(o){var i=r.current;if(i!==null)try{var f,p,m,k,E;if(t.current.cachedTimeoutId===t.current.timeoutId)throw new H("The input selection has not been updated.");t.current.cachedTimeoutId=t.current.timeoutId;var b=i.value,s=i.selectionStart,O=i.selectionEnd;if(s===null||O===null)throw new H("The selection attributes have not been initialized.");var y,v=(f=(p=i._valueTracker)===null||p===void 0||(m=p.getValue)===null||m===void 0?void 0:m.call(p))!==null&&f!==void 0?f:"";if(o.inputType===void 0&&(t.current.start=0,t.current.end=v.length),s>t.current.start?y="insert":s<=t.current.start&&s<t.current.end?y="deleteBackward":s===t.current.end&&b.length<v.length&&(y="deleteForward"),y===void 0||(y==="deleteBackward"||y==="deleteForward")&&b.length>v.length)throw new H("Input type detection error.");var M="",S="",V=t.current.start,h=t.current.end;if(y==="insert")M=b.slice(t.current.start,s);else{var _=v.length-b.length;V=s,h=s+_,S=v.slice(V,h)}var x=u.current.tracking({inputType:y,previousValue:v,value:b,addedValue:M,deletedValue:S,changeStart:V,changeEnd:h,selectionStart:s,selectionEnd:O});Q(i,{value:x.value,selectionStart:x.selectionStart,selectionEnd:x.selectionEnd});var L=u.current.eventType,$=u.current.eventHandler;if(typeof L=="string"&&$){var N=i.value,K=i.selectionStart,j=i.selectionEnd;d.current=!1,requestAnimationFrame(function(){Q(i,{value:N,selectionStart:K??N.length,selectionEnd:j??N.length});var R=new CustomEvent(L,{bubbles:!0,cancelable:!1,composed:!0,detail:x.__detail});i.dispatchEvent(R),oe.unstable_batchedUpdates?oe.unstable_batchedUpdates($,R):$(R),d.current=!0})}(k=i._valueTracker)===null||k===void 0||(E=k.setValue)===null||E===void 0||E.call(k,v),t.current.start=x.selectionStart,t.current.end=x.selectionEnd}catch(R){var F,I,w,C,P,A,D,q,X,Y,Z,le=R,ke=le.name,g=le.cause;if(Q(i,{value:(F=(I=g==null||(w=g.__attributes)===null||w===void 0?void 0:w.value)!==null&&I!==void 0?I:(C=i._valueTracker)===null||C===void 0||(P=C.getValue)===null||P===void 0?void 0:P.call(C))!==null&&F!==void 0?F:"",selectionStart:(A=g==null||(D=g.__attributes)===null||D===void 0?void 0:D.selectionStart)!==null&&A!==void 0?A:t.current.start,selectionEnd:(q=g==null||(X=g.__attributes)===null||X===void 0?void 0:X.selectionEnd)!==null&&q!==void 0?q:t.current.end}),(g==null||(Y=g.__attributes)===null||Y===void 0?void 0:Y.selectionStart)!==void 0&&(t.current.start=g.__attributes.selectionStart),(g==null||(Z=g.__attributes)===null||Z===void 0?void 0:Z.selectionEnd)!==void 0&&(t.current.end=g.__attributes.selectionEnd),o.preventDefault(),o.stopPropagation(),ke!=="SyntheticChangeError")throw R}}})},[])}function ee(n,{replacementChars:e,replacement:a,separate:c}){var d;let l=e,t="";for(const r of n){const u=!Object.prototype.hasOwnProperty.call(a,r)&&((d=a[l[0]])==null?void 0:d.test(r));(c&&r===l[0]||u)&&(l=l.slice(1),t+=r)}return t}function ie(n,e,a){const c=["[","]","\\","/","^","$",".","|","?","*","+","(",")","{","}"];let l="";for(let t=0;t<n.length;t++){const d=Object.prototype.hasOwnProperty.call(e,n[t]),r=a?`(?!${n[t]})`:"";t===0&&(l+="^"),l+=d?r+e[n[t]].toString().slice(1,-1):c.includes(n[t])?`\\${n[t]}`:n[t],t===n.length-1&&(l+="$")}return l}function qe(n,{mask:e,replacement:a,showMask:c}){let l=function(u,{mask:o,replacement:i}){let f=0,p="";for(const m of o)Object.prototype.hasOwnProperty.call(i,m)&&u[f]!==void 0?p+=u[f++]:p+=m;return p}(n,{mask:e,replacement:a});const t=function(u,{mask:o,replacement:i}){return u.split("").map((f,p)=>({type:Object.prototype.hasOwnProperty.call(i,f)?"replacement":f===o[p]?"mask":"input",value:f,index:p}))}(l,{mask:e,replacement:a});if(!c){let u=-1;for(let o=t.length-1;o>=0;o--)if(t[o].type==="input"){u=t[o].index;break}l=l.slice(0,u+1)}const d=ie(e,a,!1),r=ie(e,a,!0);return{value:l,input:n,parts:t,pattern:d,isValid:RegExp(r).test(l)}}function ue(n,{start:e=0,end:a,mask:c,replacement:l,separate:t}){const d=n.slice(e,a),r=c.slice(e,a);let u="";for(let o=0;o<r.length;o++){const i=Object.prototype.hasOwnProperty.call(l,r[o]);i&&d[o]!==void 0&&d[o]!==r[o]?u+=d[o]:i&&t&&(u+=r[o])}return u}const ce=n=>n.length>0?{[n]:/./}:{};function Oe({mask:n="",replacement:e={},showMask:a=!1,separate:c=!1,modify:l,onMask:t}={}){const d=typeof e=="string"?ce(e):e,r=T.useRef(null);return Me({init:({controlled:u,initialValue:o})=>{o=u||o?o:a?n:"";const i={mask:n,replacement:d,showMask:a,separate:c};return r.current={value:o,props:i,fallbackProps:i},{value:o}},tracking:({inputType:u,previousValue:o,addedValue:i,changeStart:f,changeEnd:p})=>{if(r.current===null)throw new H("The state has not been initialized.");r.current.value!==o?r.current.props=r.current.fallbackProps:r.current.fallbackProps=r.current.props;let m=ue(o,{end:f,mask:r.current.props.mask,replacement:r.current.props.replacement,separate:r.current.props.separate});const k=RegExp(`[^${Object.keys(r.current.props.replacement).join("")}]`,"g"),E=r.current.props.mask.replace(k,"");if(m&&(m=ee(m,{replacementChars:E,replacement:r.current.props.replacement,separate:r.current.props.separate})),i&&(i=ee(i,{replacementChars:E.slice(m.length),replacement:r.current.props.replacement,separate:!1})),u==="insert"&&i==="")throw new H("The character does not match the key value of the `replacement` object.");let b=ue(o,{start:p,mask:r.current.props.mask,replacement:r.current.props.replacement,separate:r.current.props.separate});if(r.current.props.separate){const h=r.current.props.mask.slice(f,p).replace(k,""),_=h.length-i.length;_<0?b=b.slice(-_):_>0&&(b=h.slice(-_)+b)}b&&(b=ee(b,{replacementChars:E.slice(m.length+i.length),replacement:r.current.props.replacement,separate:r.current.props.separate}));const s=m+i+b;let{mask:O=n,replacement:y=d,showMask:v=a,separate:M=c}=(l==null?void 0:l(s))??{};typeof y=="string"&&(y=ce(y));const S=qe(s,{mask:O,replacement:y,showMask:v}),V=function({inputType:h,value:_,addedValue:x,beforeChangeValue:L,parts:$,replacement:N,separate:K}){var P,A,D;const j=$.filter(({type:q})=>q==="input"||K&&q==="replacement"),F=(P=j[L.length+x.length-1])==null?void 0:P.index,I=(A=j[L.length-1])==null?void 0:A.index,w=(D=j[L.length+x.length])==null?void 0:D.index;if(h==="insert"){if(F!==void 0)return F+1;if(w!==void 0)return w;if(I!==void 0)return I+1}if(h==="deleteForward"){if(w!==void 0)return w;if(I!==void 0)return I+1}if(h==="deleteBackward"){if(I!==void 0)return I+1;if(w!==void 0)return w}const C=_.split("").findIndex(q=>Object.prototype.hasOwnProperty.call(N,q));return C!==-1?C:_.length}({inputType:u,value:S.value,addedValue:i,beforeChangeValue:m,parts:S.parts,replacement:y,separate:M});return r.current.value=S.value,r.current.props={mask:O,replacement:y,showMask:v,separate:M},{value:S.value,selectionStart:V,selectionEnd:V,__detail:S}},customInputEventType:"input-mask",customInputEventHandler:t})}const Ce=T.forwardRef(function({component:n,mask:e,replacement:a,showMask:c,separate:l,modify:t,onMask:d,...r},u){const o=Oe({mask:e,replacement:a,showMask:c,separate:l,modify:t,onMask:d}),i=xe(o,u);return ge.jsx(n||"input",{ref:i,...r})});function re(n,e){return ge.jsx(Ce,{ref:e,component:Se,...n})}const _e=T.forwardRef(re);_e.displayName="DInputMask";try{re.displayName="DInputMask",re.__docgenInfo={description:"",displayName:"DInputMask",props:{style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"CSSProperties | undefined"}},className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string | undefined"}},dataAttributes:{defaultValue:null,description:"",name:"dataAttributes",required:!1,type:{name:"DataAttributes | undefined"}},iconStart:{defaultValue:null,description:"",name:"iconStart",required:!1,type:{name:"string | undefined"}},iconEnd:{defaultValue:null,description:"",name:"iconEnd",required:!1,type:{name:"string | undefined"}},iconMaterialStyle:{defaultValue:null,description:"",name:"iconMaterialStyle",required:!1,type:{name:"boolean | undefined"}},iconFamilyClass:{defaultValue:null,description:"",name:"iconFamilyClass",required:!1,type:{name:"string | undefined"}},iconFamilyPrefix:{defaultValue:null,description:"",name:"iconFamilyPrefix",required:!1,type:{name:"string | undefined"}},value:{defaultValue:null,description:"",name:"value",required:!1,type:{name:"string | undefined"}},size:{defaultValue:null,description:"",name:"size",required:!1,type:{name:"enum",value:[{value:"undefined"},{value:'"sm"'},{value:'"lg"'}]}},onChange:{defaultValue:null,description:"",name:"onChange",required:!1,type:{name:"((value: string) => void) | undefined"}},loading:{defaultValue:null,description:"",name:"loading",required:!1,type:{name:"boolean | undefined"}},label:{defaultValue:null,description:"",name:"label",required:!1,type:{name:"string | undefined"}},invalid:{defaultValue:null,description:"",name:"invalid",required:!1,type:{name:"boolean | undefined"}},valid:{defaultValue:null,description:"",name:"valid",required:!1,type:{name:"boolean | undefined"}},labelIcon:{defaultValue:null,description:"",name:"labelIcon",required:!1,type:{name:"string | undefined"}},labelIconFamilyClass:{defaultValue:null,description:"",name:"labelIconFamilyClass",required:!1,type:{name:"string | undefined"}},labelIconFamilyPrefix:{defaultValue:null,description:"",name:"labelIconFamilyPrefix",required:!1,type:{name:"string | undefined"}},labelIconMaterialStyle:{defaultValue:null,description:"",name:"labelIconMaterialStyle",required:!1,type:{name:"boolean | undefined"}},iconStartDisabled:{defaultValue:null,description:"",name:"iconStartDisabled",required:!1,type:{name:"boolean | undefined"}},iconStartFamilyClass:{defaultValue:null,description:"",name:"iconStartFamilyClass",required:!1,type:{name:"string | undefined"}},iconStartFamilyPrefix:{defaultValue:null,description:"",name:"iconStartFamilyPrefix",required:!1,type:{name:"string | undefined"}},iconStartAriaLabel:{defaultValue:null,description:"",name:"iconStartAriaLabel",required:!1,type:{name:"string | undefined"}},iconStartTabIndex:{defaultValue:null,description:"",name:"iconStartTabIndex",required:!1,type:{name:"number | undefined"}},iconStartMaterialStyle:{defaultValue:null,description:"",name:"iconStartMaterialStyle",required:!1,type:{name:"boolean | undefined"}},iconEndDisabled:{defaultValue:null,description:"",name:"iconEndDisabled",required:!1,type:{name:"boolean | undefined"}},iconEndFamilyClass:{defaultValue:null,description:"",name:"iconEndFamilyClass",required:!1,type:{name:"string | undefined"}},iconEndFamilyPrefix:{defaultValue:null,description:"",name:"iconEndFamilyPrefix",required:!1,type:{name:"string | undefined"}},iconEndAriaLabel:{defaultValue:null,description:"",name:"iconEndAriaLabel",required:!1,type:{name:"string | undefined"}},iconEndTabIndex:{defaultValue:null,description:"",name:"iconEndTabIndex",required:!1,type:{name:"number | undefined"}},iconEndMaterialStyle:{defaultValue:null,description:"",name:"iconEndMaterialStyle",required:!1,type:{name:"boolean | undefined"}},hint:{defaultValue:null,description:"",name:"hint",required:!1,type:{name:"string | undefined"}},floatingLabel:{defaultValue:null,description:"",name:"floatingLabel",required:!1,type:{name:"boolean | undefined"}},inputStart:{defaultValue:null,description:"",name:"inputStart",required:!1,type:{name:"ReactNode"}},inputEnd:{defaultValue:null,description:"",name:"inputEnd",required:!1,type:{name:"ReactNode"}},onIconStartClick:{defaultValue:null,description:"",name:"onIconStartClick",required:!1,type:{name:"((value?: string | undefined) => void) | undefined"}},onIconEndClick:{defaultValue:null,description:"",name:"onIconEndClick",required:!1,type:{name:"((value?: string | undefined) => void) | undefined"}}}}}catch{}const Le={title:"Design System/Components/Input Mask",component:_e,argTypes:{id:{control:"text",type:"string",description:"The id of the input"},name:{control:"text",type:"string",description:"Name of the input"},className:{control:"text",type:"string"},style:{control:"object"},label:{control:"text",type:"string"},labelIcon:{control:{type:"select",labels:{undefined:"empty"}},type:"string",options:[void 0,...G]},placeholder:{control:"text",type:"string"},type:{control:"select",options:["text","email","number"],type:"string",description:"The type of the input"},value:{control:"text",type:"string",description:"The value of the input"},size:{control:{type:"select",labels:{undefined:"empty"}},type:"string",options:[void 0,"sm","lg"]},inputMode:{control:"text",type:"string",description:"Input mode"},pattern:{control:"text",type:"string",description:"Pattern to validate"},disabled:{control:"boolean",type:"boolean",table:{defaultValue:{summary:"false"}}},readOnly:{control:"boolean",type:"boolean",table:{defaultValue:{summary:"false"}}},loading:{control:"boolean",type:"boolean",table:{defaultValue:{summary:"false"}}},iconStart:{control:{type:"select",labels:{undefined:"empty"}},type:"string",options:[void 0,...G]},iconStartAriaLabel:{control:"text",type:"string"},iconEndAriaLabel:{control:"text",type:"string"},iconEnd:{control:{type:"select",labels:{undefined:"empty"}},type:"string",options:[void 0,...G]},hint:{control:"text",type:"string",description:"Hint to display, also used to display validity feedback"},invalid:{control:"boolean",type:"boolean",table:{defaultValue:{summary:"false"}}},valid:{control:"boolean",type:"boolean",table:{defaultValue:{summary:"false"}}},floatingLabel:{control:"boolean",type:"boolean",table:{defaultValue:{summary:"false"}}},onIconStartClick:{action:"onIconStartClicked"},onIconEndClick:{action:"onIconStartClicked"},mask:{control:"text",type:"string",description:"example: (+56)_ ____ ____"},replacement:{control:"object",description:"example: { _: /\\d/ }"},showMask:{control:"boolean",type:"boolean"},separate:{control:"boolean",type:"boolean"},onChange:{action:"onChange"},onBlur:{action:"onBlur"},onFocus:{action:"onFocus"},onWheel:{action:"onWheel"},onMask:{action:"onMask"},modify:{action:"modify"}}},W={args:{id:"componentId1",label:"Label",labelIcon:void 0,type:"text",iconStart:"phone",iconStartAriaLabel:"start action",iconEndAriaLabel:"end action",hint:"Write your phone number",mask:"(+56)_ ____ ____",replacement:{_:/\d/},showMask:!0}},B={args:{id:"componentId2",label:"Label",labelIcon:void 0,type:"text",iconStart:"phone",iconStartAriaLabel:"start action",iconEndAriaLabel:"end action",hint:"Write your phone number",mask:"(+56)_ ____ ____",replacement:{_:/\d/},showMask:!0,invalid:!0}},z={args:{id:"componentId3",label:"Label",labelIcon:void 0,type:"text",iconStart:"phone",iconStartAriaLabel:"start action",iconEndAriaLabel:"end action",hint:"Write your phone number",mask:"(+56)_ ____ ____",replacement:{_:/\d/},showMask:!0,valid:!0}};var se,de,pe;W.parameters={...W.parameters,docs:{...(se=W.parameters)==null?void 0:se.docs,source:{originalSource:`{
  args: {
    id: 'componentId1',
    label: 'Label',
    labelIcon: undefined,
    type: 'text',
    iconStart: 'phone',
    iconStartAriaLabel: 'start action',
    iconEndAriaLabel: 'end action',
    hint: 'Write your phone number',
    mask: '(+56)_ ____ ____',
    replacement: {
      _: /\\d/
    },
    showMask: true
  }
}`,...(pe=(de=W.parameters)==null?void 0:de.docs)==null?void 0:pe.source}}};var fe,me,ye;B.parameters={...B.parameters,docs:{...(fe=B.parameters)==null?void 0:fe.docs,source:{originalSource:`{
  args: {
    id: 'componentId2',
    label: 'Label',
    labelIcon: undefined,
    type: 'text',
    iconStart: 'phone',
    iconStartAriaLabel: 'start action',
    iconEndAriaLabel: 'end action',
    hint: 'Write your phone number',
    mask: '(+56)_ ____ ____',
    replacement: {
      _: /\\d/
    },
    showMask: true,
    invalid: true
  }
}`,...(ye=(me=B.parameters)==null?void 0:me.docs)==null?void 0:ye.source}}};var be,ve,he;z.parameters={...z.parameters,docs:{...(be=z.parameters)==null?void 0:be.docs,source:{originalSource:`{
  args: {
    id: 'componentId3',
    label: 'Label',
    labelIcon: undefined,
    type: 'text',
    iconStart: 'phone',
    iconStartAriaLabel: 'start action',
    iconEndAriaLabel: 'end action',
    hint: 'Write your phone number',
    mask: '(+56)_ ____ ____',
    replacement: {
      _: /\\d/
    },
    showMask: true,
    valid: true
  }
}`,...(he=(ve=z.parameters)==null?void 0:ve.docs)==null?void 0:he.source}}};const je=["Default","Invalid","Valid"],$e=Object.freeze(Object.defineProperty({__proto__:null,Default:W,Invalid:B,Valid:z,__namedExportsOrder:je,default:Le},Symbol.toStringTag,{value:"Module"}));export{$e as D,_e as F,W as a};
