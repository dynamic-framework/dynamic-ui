{"version":3,"names":["DInputCurrencyBase","this","changeHandler","event","stopPropagation","internalValueAsNumber","detail","parseFloat","undefined","internalValueAsFormat","currency","Object","assign","currencyOptions","symbol","format","eventChange","emit","blurHandler","internalType","eventBlur","focusHandler","eventFocus","wheelHandler","_a","htmlInput","innerBlur","watchValueHandler","newValue","internalIsInvalid","isValidValue","value","minValue","maxValue","valueAsType","connectedCallback","componentDidLoad","generateStyleVariables","PREFIX_BS","generateSymbolStyleVariables","color","render","h","ref","el","style","innerId","name","label","labelIcon","labelIconFamilyClass","labelIconFamilyPrefix","placeholder","iconStart","iconStartFamilyClass","iconStartFamilyPrefix","iconEnd","iconEndFamilyClass","iconEndFamilyPrefix","isDisabled","isReadOnly","isLoading","hint","isInvalid","isValid","type","innerInputMode","pattern","onEventChange","onEventBlur","onEventFocus","onEventWheel","slot","currencyCode"],"sources":["./src/components/d-input-currency-base/d-input-currency-base.tsx"],"sourcesContent":["import type { ComponentInterface, EventEmitter } from '@stencil/core';\nimport {\n  Component,\n  h,\n  Prop,\n  Event,\n  Watch,\n  State,\n} from '@stencil/core';\nimport currency from 'currency.js';\nimport type { Options } from 'currency.js';\n\nimport { PREFIX_BS } from '../../utils';\n\n@Component({ tag: 'd-input-currency-base' })\nexport class DInputCurrencyBase implements ComponentInterface {\n  /**\n   * The id of the input\n   */\n  @Prop() innerId!: string;\n\n  /**\n   * The name of the input\n   */\n  @Prop() name?: string;\n\n  /**\n   * The label text\n   */\n  @Prop() label = '';\n\n  /**\n   * Icon for the label text\n   */\n  @Prop() labelIcon?: string;\n\n  /**\n   * Icon label family class\n   */\n  @Prop() labelIconFamilyClass?: string;\n\n  /**\n   * Icon label family class\n   */\n  @Prop() labelIconFamilyPrefix?: string;\n\n  /**\n   * Placeholder for the input\n   */\n  @Prop() placeholder?: string = '';\n\n  /**\n   * The value of the input\n   */\n  @Prop() value?: number;\n\n  /**\n   * The input is disabled\n   */\n  @Prop() isDisabled = false;\n\n  /**\n   * Flag to read only the input\n   */\n  @Prop() isReadOnly = false;\n\n  /**\n   * Flag for loading state.\n   */\n  @Prop() isLoading = false;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconFamilyClass?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconFamilyPrefix?: string;\n\n  /**\n   * Icon for the left\n   * */\n  @Prop() iconStart?: string;\n\n  /**\n   * Left icon family class\n   */\n  @Prop() iconStartFamilyClass?: string;\n\n  /**\n   * Left icon family class\n   */\n  @Prop() iconStartFamilyPrefix?: string;\n\n  /**\n   * Icon for the end\n   * */\n  @Prop() iconEnd?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconEndFamilyClass?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconEndFamilyPrefix?: string;\n\n  /**\n   * Hint to display\n   */\n  @Prop() hint?: string;\n\n  /**\n   * Add is-invalid class\n   */\n  @Prop() isInvalid = false;\n\n  /**\n   * Add is-valid class\n   */\n  @Prop() isValid = false;\n\n  /**\n   * * The min value of the input\n  */\n  @Prop() minValue?: number;\n\n  /**\n   * * The max value of the input\n  */\n  @Prop() maxValue?: number;\n\n  /**\n   * Options for the d-input-currency-base\n   */\n  @Prop() currencyOptions!: Options;\n\n  /**\n   * Currency code\n   */\n  @Prop() currencyCode?: string;\n\n  /**\n   * Emitted when the inputs change\n   */\n  @Event() eventChange!: EventEmitter<number>;\n\n  /**\n   * Emitted when the inputs bur\n   */\n  @Event() eventBlur!: EventEmitter<number>;\n\n  /**\n   * Emitted when the inputs focus\n   */\n  @Event() eventFocus!: EventEmitter<number>;\n\n  @State() internalValueAsNumber?: number;\n\n  @State() internalValueAsFormat?: string;\n\n  @State() internalType: 'text' | 'number' = 'text';\n\n  @State() internalIsInvalid = false;\n\n  @Watch('value')\n  watchValueHandler(newValue: number) {\n    this.internalIsInvalid = !this.isValidValue(newValue);\n  }\n\n  /**\n   * HTML d-input element\n   */\n  private htmlInput?: HTMLDInputElement;\n\n  /**\n   * Emit input and select values when the values change\n   */\n  private changeHandler = (event: CustomEvent<string | number>) => {\n    event.stopPropagation();\n    this.internalValueAsNumber = (event.detail !== '' && typeof event.detail === 'string')\n      ? parseFloat(event.detail)\n      : undefined;\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.eventChange.emit(this.internalValueAsNumber);\n  };\n\n  private blurHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.internalType = 'text';\n\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.eventBlur.emit(this.internalValueAsNumber);\n  };\n\n  private focusHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.internalType = 'number';\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.eventFocus.emit(this.internalValueAsNumber);\n  };\n\n  private wheelHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.htmlInput?.innerBlur();\n  };\n\n  private isValidValue(value?: number): boolean {\n    if (value === undefined) {\n      return true;\n    }\n\n    if (this.internalType === 'number') {\n      return (\n        (this.minValue !== undefined ? value >= this.minValue : true)\n        && (this.maxValue !== undefined ? value <= this.maxValue : true)\n      );\n    }\n\n    return true;\n  }\n\n  private valueAsType() {\n    if (this.internalType === 'number') {\n      return this.internalValueAsNumber;\n    }\n\n    return this.internalValueAsFormat;\n  }\n\n  connectedCallback() {\n    this.internalValueAsNumber = this.value;\n  }\n\n  componentDidLoad() {\n    this.internalType = 'text';\n    this.internalValueAsFormat = (this.internalValueAsNumber !== undefined)\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private generateStyleVariables() {\n    return {\n      [`--${PREFIX_BS}input-currency-component-symbol-color`]: `var(--${PREFIX_BS}secondary)`,\n      [`--${PREFIX_BS}input-currency-symbol-color`]: `var(--${PREFIX_BS}input-currency-component-symbol-color)`,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private generateSymbolStyleVariables() {\n    return { color: `var(--${PREFIX_BS}m-input-currency-symbol-color)` };\n  }\n\n  render() {\n    return (\n      <d-input// eslint-disable-next-line no-return-assign\n        ref={(el) => (this.htmlInput = el)}\n        style={this.generateStyleVariables()}\n        innerId={this.innerId}\n        name={this.name}\n        label={this.label}\n        labelIcon={this.labelIcon}\n        labelIconFamilyClass={this.labelIconFamilyClass}\n        labelIconFamilyPrefix={this.labelIconFamilyPrefix}\n        placeholder={this.placeholder}\n        value={this.valueAsType()}\n        iconStart={this.iconStart}\n        iconStartFamilyClass={this.iconStartFamilyClass}\n        iconStartFamilyPrefix={this.iconStartFamilyPrefix}\n        iconEnd={this.iconEnd}\n        iconEndFamilyClass={this.iconEndFamilyClass}\n        iconEndFamilyPrefix={this.iconEndFamilyPrefix}\n        isDisabled={this.isDisabled}\n        isReadOnly={this.isReadOnly}\n        isLoading={this.isLoading}\n        hint={this.hint}\n        isInvalid={this.isInvalid}\n        isValid={this.isValid}\n        type={this.internalType}\n        innerInputMode=\"decimal\"\n        pattern=\"^[0-9]\"\n        onEventChange={this.changeHandler}\n        onEventBlur={this.blurHandler}\n        onEventFocus={this.focusHandler}\n        onEventWheel={this.wheelHandler}\n      >\n        <span\n          slot=\"input-start\"\n          style={this.generateSymbolStyleVariables()}\n        >\n          {this.currencyCode || this.currencyOptions.symbol}\n        </span>\n      </d-input>\n    );\n  }\n}\n"],"mappings":"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"}