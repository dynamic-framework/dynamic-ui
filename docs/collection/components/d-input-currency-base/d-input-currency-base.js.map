{"version":3,"file":"d-input-currency-base.js","sourceRoot":"","sources":["../../../../src/components/d-input-currency-base/d-input-currency-base.tsx"],"names":[],"mappings":"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","sourcesContent":["import type { ComponentInterface, EventEmitter } from '@stencil/core';\nimport {\n  Component,\n  h,\n  Prop,\n  Event,\n  Watch,\n  State,\n} from '@stencil/core';\nimport currency from 'currency.js';\nimport type { Options } from 'currency.js';\n\nimport { PREFIX_BS } from '../../utils';\n\n@Component({ tag: 'd-input-currency-base' })\nexport class DInputCurrencyBase implements ComponentInterface {\n  /**\n   * The id of the input\n   */\n  @Prop() innerId!: string;\n\n  /**\n   * The name of the input\n   */\n  @Prop() name?: string;\n\n  /**\n   * The label text\n   */\n  @Prop() label = '';\n\n  /**\n   * Icon for the label text\n   */\n  @Prop() labelIcon?: string;\n\n  /**\n   * Icon label family class\n   */\n  @Prop() labelIconFamilyClass?: string;\n\n  /**\n   * Icon label family class\n   */\n  @Prop() labelIconFamilyPrefix?: string;\n\n  /**\n   * Placeholder for the input\n   */\n  @Prop() placeholder?: string = '';\n\n  /**\n   * The value of the input\n   */\n  @Prop() value?: number;\n\n  /**\n   * The input is disabled\n   */\n  @Prop() isDisabled = false;\n\n  /**\n   * Flag to read only the input\n   */\n  @Prop() isReadOnly = false;\n\n  /**\n   * Flag for loading state.\n   */\n  @Prop() isLoading = false;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconFamilyClass?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconFamilyPrefix?: string;\n\n  /**\n   * Icon for the left\n   * */\n  @Prop() iconStart?: string;\n\n  /**\n   * Left icon family class\n   */\n  @Prop() iconStartFamilyClass?: string;\n\n  /**\n   * Left icon family class\n   */\n  @Prop() iconStartFamilyPrefix?: string;\n\n  /**\n   * Icon for the end\n   * */\n  @Prop() iconEnd?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconEndFamilyClass?: string;\n\n  /**\n   * Right icon family class\n   */\n  @Prop() iconEndFamilyPrefix?: string;\n\n  /**\n   * Hint to display\n   */\n  @Prop() hint?: string;\n\n  /**\n   * Add is-invalid class\n   */\n  @Prop() isInvalid = false;\n\n  /**\n   * Add is-valid class\n   */\n  @Prop() isValid = false;\n\n  /**\n   * * The min value of the input\n  */\n  @Prop() minValue?: number;\n\n  /**\n   * * The max value of the input\n  */\n  @Prop() maxValue?: number;\n\n  /**\n   * Options for the d-input-currency-base\n   */\n  @Prop() currencyOptions!: Options;\n\n  /**\n   * Currency code\n   */\n  @Prop() currencyCode?: string;\n\n  /**\n   * Emitted when the inputs change\n   */\n  @Event() eventChange!: EventEmitter<number>;\n\n  /**\n   * Emitted when the inputs bur\n   */\n  @Event() eventBlur!: EventEmitter<number>;\n\n  /**\n   * Emitted when the inputs focus\n   */\n  @Event() eventFocus!: EventEmitter<number>;\n\n  @State() internalValueAsNumber?: number;\n\n  @State() internalValueAsFormat?: string;\n\n  @State() internalType: 'text' | 'number' = 'text';\n\n  @State() internalIsInvalid = false;\n\n  @Watch('value')\n  watchValueHandler(newValue: number) {\n    this.internalIsInvalid = !this.isValidValue(newValue);\n  }\n\n  /**\n   * HTML d-input element\n   */\n  private htmlInput?: HTMLDInputElement;\n\n  /**\n   * Emit input and select values when the values change\n   */\n  private changeHandler = (event: CustomEvent<string | number>) => {\n    event.stopPropagation();\n    this.internalValueAsNumber = (event.detail !== '' && typeof event.detail === 'string')\n      ? parseFloat(event.detail)\n      : undefined;\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.eventChange.emit(this.internalValueAsNumber);\n  };\n\n  private blurHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.internalType = 'text';\n\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.eventBlur.emit(this.internalValueAsNumber);\n  };\n\n  private focusHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.internalType = 'number';\n    this.internalValueAsFormat = this.internalValueAsNumber !== undefined\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n    this.eventFocus.emit(this.internalValueAsNumber);\n  };\n\n  private wheelHandler = (event: CustomEvent) => {\n    event.stopPropagation();\n    this.htmlInput?.innerBlur();\n  };\n\n  private isValidValue(value?: number): boolean {\n    if (value === undefined) {\n      return true;\n    }\n\n    if (this.internalType === 'number') {\n      return (\n        (this.minValue !== undefined ? value >= this.minValue : true)\n        && (this.maxValue !== undefined ? value <= this.maxValue : true)\n      );\n    }\n\n    return true;\n  }\n\n  private valueAsType() {\n    if (this.internalType === 'number') {\n      return this.internalValueAsNumber;\n    }\n\n    return this.internalValueAsFormat;\n  }\n\n  connectedCallback() {\n    this.internalValueAsNumber = this.value;\n  }\n\n  componentDidLoad() {\n    this.internalType = 'text';\n    this.internalValueAsFormat = (this.internalValueAsNumber !== undefined)\n      ? currency(this.internalValueAsNumber, { ...this.currencyOptions, symbol: '' }).format()\n      : '';\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private generateStyleVariables() {\n    return {\n      [`--${PREFIX_BS}input-currency-component-symbol-color`]: `var(--${PREFIX_BS}secondary)`,\n      [`--${PREFIX_BS}input-currency-symbol-color`]: `var(--${PREFIX_BS}input-currency-component-symbol-color)`,\n    };\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  private generateSymbolStyleVariables() {\n    return { color: `var(--${PREFIX_BS}m-input-currency-symbol-color)` };\n  }\n\n  render() {\n    return (\n      <d-input// eslint-disable-next-line no-return-assign\n        ref={(el) => (this.htmlInput = el)}\n        style={this.generateStyleVariables()}\n        innerId={this.innerId}\n        name={this.name}\n        label={this.label}\n        labelIcon={this.labelIcon}\n        labelIconFamilyClass={this.labelIconFamilyClass}\n        labelIconFamilyPrefix={this.labelIconFamilyPrefix}\n        placeholder={this.placeholder}\n        value={this.valueAsType()}\n        iconStart={this.iconStart}\n        iconStartFamilyClass={this.iconStartFamilyClass}\n        iconStartFamilyPrefix={this.iconStartFamilyPrefix}\n        iconEnd={this.iconEnd}\n        iconEndFamilyClass={this.iconEndFamilyClass}\n        iconEndFamilyPrefix={this.iconEndFamilyPrefix}\n        isDisabled={this.isDisabled}\n        isReadOnly={this.isReadOnly}\n        isLoading={this.isLoading}\n        hint={this.hint}\n        isInvalid={this.isInvalid}\n        isValid={this.isValid}\n        type={this.internalType}\n        innerInputMode=\"decimal\"\n        pattern=\"^[0-9]\"\n        onEventChange={this.changeHandler}\n        onEventBlur={this.blurHandler}\n        onEventFocus={this.focusHandler}\n        onEventWheel={this.wheelHandler}\n      >\n        <span\n          slot=\"input-start\"\n          style={this.generateSymbolStyleVariables()}\n        >\n          {this.currencyCode || this.currencyOptions.symbol}\n        </span>\n      </d-input>\n    );\n  }\n}\n"]}