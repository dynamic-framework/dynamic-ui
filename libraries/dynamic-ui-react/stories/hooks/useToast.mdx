import {
  Meta,
  Canvas,
  Source
} from '@storybook/blocks';

import {
  UseToastExample,
  UseToastMaterialExample,
  UseToastTransitionExample,
  UseToastCustomContent,
} from "./useToastExamples";

import DToastContainer from '../../src/components/DToastContainer';

<Meta title="Design System/Patterns/Toast" />

# Toast
Toasts use `DToastContainer` and the `useDToast` hook, which are abstractions to configure react-toastify in conjunction with
a `DAlert` to generate toasts. For more detailed information, refer to the official [React Toastify Documentation](https://fkhadra.github.io/react-toastify/introduction/)
<br />

## Usage DToastContainer

To get started, include the **`<DToastContainer />`** component once in your app, typically near the root of your component tree.
This ensures that all toasts are rendered correctly. Here you can customize general styles for all toasts and configure a default
placement for displaying toasts. You can override this position in any single toast if needed.

<Source
  code={
  `
import React from 'react';
import ReactDOM from 'react-dom/client';

import {
  DToastContainer,
  DContextProvider,
} from '@dynamic-framework/ui-react';

import './config/liquidConfig';
import './config/i18nConfig';

import App from './App';

import '@dynamic-framework/ui-react/dist/css/dynamic-ui.css';
import './styles/base.scss';

const root = ReactDOM.createRoot(document.getElementById('widget') as Element);
root.render(
  <React.StrictMode>
    <DContextProvider>
      <App />
      <DToastContainer
        style={{
          '--toastify-toast-width': 'auto',
        }}
      />
    </DContextProvider>
  </React.StrictMode>,
);
  `
  }
  language="tsx"
  dark
/>

## Usage useDToast

The `useDToast` hook provides a simple and flexible way to create toast notifications in your application. By **default**, it uses the
`DAlert` component to display the toast message. However, you can also render a custom component if needed.

Hereâ€™s an example of how to use `useDToast` to create both default and custom toasts:

### Default Toast

<Source
  code={
  `
import {
  DButton,
  useDToast,
  DToastContainer
} from '@dynamic-framework/ui-react';

export function UseToastExample() {
  const { toast } = useDToast();
  return (
    <>
      <DButton
        text="Show Toast"
        onClick={() => (
          toast(
            'Example',
            {
              type: 'info',
              showClose: true,
              autoClose: 500,
            },
          )
        )}
      />
      <DToastContainer
        position="top-right"
      />
    </>
  );
}
  `
  }
  language="tsx"
  dark
/>

<Canvas>
  <div className="d-flex flex-column justify-content-end align-items-end" style={{ height: '300px' }}>
    <UseToastExample />
  </div>
</Canvas>

<br />

### Custom Toast

<table style={{tableLayout: 'fixed'}}>
  <thead>
    <tr>
      <th>Toast</th>
      <th>Component</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>
        <Source
          code={
            `
import {
  DButton,
  useDToast,
  DToastContainer
} from '@dynamic-framework/ui-react';
import MyComponent from './MyComponent';

export function UseCustomToastExample() {
  const { toast } = useDToast();
  return (
    <>
      <DButton
        text="Show Toast"
        onClick={() => (
          toast(
            MyComponent,
            {
              type: 'info',
              showClose: true,
              autoClose: 500,
            },
          )
        )}
      />
      <DToastContainer
        position="top-right"
        style={{
          '--toastify-toast-width': '200px',
        }}
      />
    </>
  );
}
            `
          }
          language="tsx"
          dark
        />
      </td>
      <td>
        <Source
          code={
          `
import { ToastContentProps } from 'react-toastify';
import { DButton } from '@dynamic-framework/ui-react';

export function MyComponent(
  {
    closeToast
  }: ToastContentProps
) {
  return (
    <div
      className="bg-surface-secondary p-4 text-center"
    >
      <p className="fw-bold">Toast!</p>
      <DButton
        size="sm"
        variant="outline"
        onClick={closeToast}
        text="Close toast"
      />
    </div>
  );
}
          `
          }
          language="tsx"
          dark
        />
      </td>
    </tr>
  </tbody>
</table>

<Canvas>
  <div className="d-flex flex-column justify-content-end align-items-end" style={{ height: '300px' }}>
    <UseToastCustomContent />
  </div>
</Canvas>
<br />

## Example of usage with material symbols
To use material symbols it is necessary to configure the DContextProvider

```tsx
import {
  DButton,
  DToastContainer,
  DContextProvider,
  useDToast,
} from '@dynamic-framework/ui-react';

export default function UseToastExamples() {
  const { toast } = useDToast();
  return (
    <DContextProvider
      icon={{
        materialStyle: true,
        familyClass: 'material-symbols-outlined',
        familyPrefix: '',
      }}
    >
      <DButton
        text="Show Toast"
        onClick={() => (
          toast(
            'Example',
            {
              type: 'info',
              showClose: true,
              autoClose: 500,
              icon: 'info',
              iconClose: 'close',
            },
          )
        )}
      />
      <DToastContainer position="bottom-center" />
    </>
  )
}
```

<Canvas>
  <div className="d-flex flex-column justify-content-end align-items-end" style={{ height: '300px' }}>
    <UseToastMaterialExample />
  </div>
</Canvas>

## Example with available transitions

```tsx
import {
  DButton,
  DToastContainer,
  useDToast,
} from '@dynamic-framework/ui-react';

export default function UseDToastExamples() {
  const { toast } = useDToast();
  return (
    <>
      <DButton
        text="Show Toast Bounce"
        onClick={() => (
          toast(
            'Example',
            {
              type: 'info',
              showClose: true,
              autoClose: 500,
              transition: 'bounce',
            },
          )
        )}
      />
      <DToastContainer position="top-right" />
    </>
  );
}
```
<Canvas >
  <div className="d-flex flex-column justify-content-end align-items-end" style={{ height: '300px' }}>
    <UseToastTransitionExample />
  </div>
</Canvas>
